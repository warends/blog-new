angular.module("willsBlog",["ngResource","ngAnimate","ngSanitize","ui.router","duScroll"]),angular.module("willsBlog").config(["$locationProvider","$stateProvider","$urlRouterProvider",function(e,t,o){o.otherwise("/"),e.html5Mode(!0),t.state("home",{url:"/",templateUrl:"/partials/main/main",controller:"mainCtrl"}).state("account",{url:"/account",templateUrl:"/partials/login/login",controller:"loginCtrl"}).state("signup",{url:"/signup",templateUrl:"/partials/login/signup",controller:"signupCtrl"}).state("posts",{url:"/posts",templateUrl:"/partials/blog/blog-list",controller:"blogListCtrl"}).state("profile",{url:"/profile",templateUrl:"/partials/admin/profile",controller:"profileCtrl",resolve:{routeRoleCheck:["mvAuth",function(e){return e.authorizeAutheticatedUserForRoute()}]}}).state("postDetail",{url:"/posts/:slug",templateUrl:"/partials/blog/post-detail",controller:"postDetailCtrl"}).state("newPost",{url:"/admin/new-post",templateUrl:"/partials/blog/new-post",controller:"newPostCtrl",resolve:{routeRoleCheck:["mvAuth",function(e){return e.authorizeCurrentUserForRoute("admin")}]}}).state("editPost",{url:"/admin/:slug/edit",templateUrl:"/partials/blog/edit-post",controller:"editPostCtrl",resolve:{routeRoleCheck:["mvAuth",function(e){return e.authorizeCurrentUserForRoute("admin")}]}}).state("users",{url:"/admin/users",templateUrl:"/partials/admin/users-list",controller:"userListCtrl",resolve:{routeRoleCheck:["mvAuth",function(e){return e.authorizeCurrentUserForRoute("admin")}]}})}]),angular.module("willsBlog").run(["$rootScope","$location","$stateParams",function(e,t,o){e.$on("$stateChangeError",function(e,o,n,r){"not authorized"===r&&t.path("/")}),e.$on("$stateChangeSuccess",function(e,t,o){window.scrollTo(0,0)})}]),angular.module("willsBlog").controller("profileCtrl",["$scope","mvAuth","identity","notifier",function(e,t,o,n){e.username=o.currentUser.username,e.fName=o.currentUser.firstName,e.lName=o.currentUser.lastName,e.update=function(){var o={username:e.username,firstName:e.fName,lastName:e.lName};e.password&&e.password.length>0&&(o.password=e.password),t.updateCurrentUser(o).then(function(){n.notify("Your information has been updated")},function(e){n.error(e)})}}]),angular.module("willsBlog").controller("userListCtrl",["$scope","mvUser",function(e,t){e.users=t.query()}]),angular.module("willsBlog").directive("globalModal",function(){return{restrict:"E",scope:{show:"="},replace:!0,transclude:!0,link:function(e,t,o){e.dialogStyle={},o.width&&(e.dialogStyle.width=o.width),o.height&&(e.dialogStyle.height=o.height),e.hideModal=function(){e.show=!1}},templateUrl:"/partials/common/modal"}}),angular.module("willsBlog").value("Toastr",toastr),angular.module("willsBlog").factory("notifier",["Toastr",function(e){return{notify:function(t){e.success(t),console.log(t)},error:function(t){e.error(t),console.log(t)}}}]),angular.module("willsBlog").factory("Meta",function(){var e="Web Development, Denver, CO",t="I enjoy all things web development and am always actively learning the newest techniques and langauges. If you have a web design or development project, give me a shout, I would love to talk about it.";return{title:function(){return e},setTitle:function(t){e=t},description:function(){return t},setDesc:function(e){t=e}}}).controller("metaCtrl",["$scope","Meta",function(e,t){e.Meta=t,e.metaDesc=t}]),angular.module("willsBlog").service("smoothScroll",["$location",function(e){this.scrollTo=function(e){function t(e){for(var t=document.getElementById(e),o=t.offsetTop,n=t;n.offsetParent&&n.offsetParent!=document.body;)n=n.offsetParent,o+=n.offsetTop;return o}function o(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}var n=o(),r=t(e),s=r>n?r-n:n-r;if(s<100)return void scrollTo(0,r);var a=Math.round(s/100);a>=20&&(a=20);var l=Math.round(s/25),i=r>n?n+l:n-l,u=0;if(r>n)for(var c=n;c<r;c+=l)setTimeout("window.scrollTo(0, "+i+")",u*a),i+=l,i>r&&(i=r),u++;else for(var c=n;c>r;c-=l)setTimeout("window.scrollTo(0, "+i+")",u*a),i-=l,i<r&&(i=r),u++}}]),angular.module("willsBlog").factory("TwitterService",["$http","$q",function(e,t){var o=function(o){var n=t.defer();return e.post("/twitter/user",{username:o}).success(function(e){return n.resolve(e)}).error(function(e){return n.reject(e)}),n.promise};return{getUser:o}}]),angular.module("willsBlog").controller("blogListCtrl",["$scope","mvCachedPost","identity","$location","Meta",function(e,t,o,n,r){r.setTitle("Blog"),e.posts=t.query(),e.identity=o,e.sortOptions=[{value:"title",text:"Sort by Title"},{value:"published",text:"Published Date"}],e.sortOrder=e.sortOptions[0].value}]),angular.module("willsBlog").controller("editPostCtrl",["$scope","notifier","mvPost","$q","$location","$stateParams",function(e,t,o,n,r,s){e.post=o.get({slug:s.slug}),e.post.data={_id:e.post._id,title:e.post.title,slug:e.post.slug,categories:e.post.categories,headerImage:e.post.headerImage,excerpt:e.post.excerpt,body:e.post.body,author:e.post.author},e.updatePost=function(){e.post.$update({slug:e.post.slug},function(){t.notify("Your post has been updated"),r.path("/blog")},function(e){t.error(e.data)})},e.deletePost=function(){e.post.$delete({slug:e.post.slug},function(){t.notify("Deleted from server"),r.path("/blog")})}}]),angular.module("willsBlog").factory("mvCachedPost",["mvPost",function(e){var t;return{query:function(){return t||(t=e.query()),t}}}]),angular.module("willsBlog").factory("mvPost",["$resource",function(e){return e("/api/posts/:slug",{slug:"@slug"},{update:{method:"PUT"}},{stripTrailingSlashes:!1})}]),angular.module("willsBlog").controller("newPostCtrl",["$scope","notifier","mvPost","$location",function(e,t,o,n){e.post=new o,e.createNewPost=function(){e.post.$save(function(){t.notify("New Post Created"),n.path("/blog")})},e.cancel=function(){n.path("/blog")}}]),angular.module("willsBlog").controller("postDetailCtrl",["$scope","mvCachedPost","mvPost","$stateParams","Meta",function(e,t,o,n,r){e.post=o.get({slug:n.slug},function(){var t=e.post.title,o=e.post.excerpt;r.setTitle(t),r.setDesc(o)})}]),angular.module("willsBlog").factory("identity",["$window","mvUser",function(e,t){var o;return e.bootstrappedUserObject&&(o=new t,angular.extend(o,e.bootstrappedUserObject)),{currentUser:o,isAuthenticated:function(){return!!this.currentUser},isAuthorized:function(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}}}]),angular.module("willsBlog").controller("loginCtrl",["$scope","$http","identity","notifier","mvAuth","$location","Meta",function(e,t,o,n,r,s,a){a.setTitle("Account"),e.identity=o,e.signIn=function(t,o){r.authenticateUser(t,o).then(function(t){t?(n.notify("You have signed in"),s.url("/account"),e.actShown=!1):n.notify("Username/Password Incorrect")})},e.signOut=function(){r.logoutUser().then(function(){e.username="",e.password="",n.notify("You have logged out"),s.path("/")})},e.signup=function(){var t={username:e.username,firstName:e.fName,lastName:e.lName,password:e.password};r.createUser(t).then(function(){n.notify("User account created"),s.path("/")},function(e){n.error(e)})},e.cancel=function(){s.path("/")},e.actShown=!1,e.toggleAccount=function(){o.isAuthenticated()?s.path("/account"):e.actShown=!e.actShown},e.signupShown=!1,e.toggleSignup=function(){e.signupShown=!e.signupShown}}]),angular.module("willsBlog").factory("mvAuth",["$http","identity","$q","mvUser",function(e,t,o,n){return{authenticateUser:function(r,s){var a=o.defer();return e.post("/login",{username:r,password:s}).then(function(e){if(e.data.success){var o=new n;angular.extend(o,e.data.user),t.currentUser=o,a.resolve(!0)}else a.resolve(!1)}),a.promise},logoutUser:function(){var n=o.defer();return e.post("/logout",{logout:!0}).then(function(){t.currentUser=void 0,n.resolve()}),n.promise},authorizeCurrentUserForRoute:function(e){return!!t.isAuthorized("admin")||o.reject("not authorized")},authorizeAutheticatedUserForRoute:function(){return!!t.isAuthenticated()||o.reject("not a current user")},createUser:function(e){var r=new n(e),s=o.defer();return r.$save().then(function(){t.currentUser=r,s.resolve()},function(e){s.reject(e.data.reason)}),s.promise},updateCurrentUser:function(e){var n=o.defer(),r=angular.copy(t.currentUser);return angular.extend(r,e),r.$update().then(function(){t.currentUser=r,n.resolve()},function(e){n.reject(e.data.reason)}),n.promise}}}]),angular.module("willsBlog").factory("mvUser",["$resource",function(e){var t=e("/api/users/:id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return t.prototype.isAdmin=function(){return this.roles&&this.roles.indexOf("admin")>-1},t}]),angular.module("willsBlog").controller("signupCtrl",["$scope","mvAuth","notifier","$location",function(e,t,o,n){e.signup=function(){var r={username:e.username,firstName:e.fName,lastName:e.lName,password:e.password};t.createUser(r).then(function(){o.notify("User account created"),n.path("/")},function(e){o.error(e)})},e.cancel=function(){n.path("/")}}]),angular.module("willsBlog").controller("carouselCtrl",["$scope",function(e){e.slides=[{name:"Mobile",svg:"mobile-svg",desc:"Is your website up to date with the most current mobile design trends? If not, you are loosing valuable business. Ensure that your customers can reach your business from anywhere and receive the best user experience. By building with responsive design in mind, your customers will get a pixel perfect look from mobile to tablet or desktop."},{name:"ECommerce",svg:"ecomm-svg",desc:"Do you have a new product you are looking to bring to market and need an e-commerce site or just looking for more modern feel to an existing site?  By utilizing robust ecommerce platforms, we can design and develop a site that will scale with your business and needs all in time to meet your busy deadlines. "},{name:"SEO",svg:"seo-svg",desc:"Having a modern design and user friendly website is great, but if customers can`t find your business, it wont matter much.  We design and develop every aspect of the website with search engine optimization in mind and so your customers can find you among the competition.  Also through research and analytics we can develop, plan and deploy the best SEO and marketing practices to increase conversions and retention."}],e.currentIndex=0,e.setCurrentSlideIndex=function(t){e.currentIndex=t},e.isCurrentSlideIndex=function(t){return e.currentIndex===t}}]).animation(".slide-animation",function(){return{addClass:function(e,t,o){"ng-hide"==t?TweenMax.to(e,.5,{left:-e.parent().width(),onComplete:o}):o()},removeClass:function(e,t,o){"ng-hide"==t?(e.removeClass("ng-hide"),TweenMax.set(e,{left:e.parent().width()}),TweenMax.to(e,.5,{left:0,onComplete:o})):o()}}}),angular.module("willsBlog").controller("mainCtrl",["$scope","$location","mvCachedPost","notifier","TwitterService","$http","Meta",function(e,t,o,n,r,s,a){a.setTitle("Home"),a.setDesc("I enjoy all things web development and am always actively learning the newest techniques and langauges. If you have a web design or development project, give me a shout, I would love to talk about it."),e.services=[{name:"Development",svg:"dev-logo",description:"Customized and reusable code using the most up to date HTML5, CSS3 and Javascript framworks. Options range from static sites, content managed sites, and ecommerce stores.",more:"Development Skills include HTML5, CSS, Javascript, Angular, Backbone, Node, Express, Boostrap and more."},{name:"Web Design",svg:"design-logo",description:"Creating an excellent user experience through clean, simple and thoroughly crafted design. Collaboration with clients during design process ensures a superb finished project.",more:"Services include wire frames, photoshop mockups, logo design, and company branding."},{name:"Support",svg:"sup-logo",description:"Support is readily available for clients when anything comes up along the development process. Also available are personal instruction on how to maintain or update your own site.",more:"Have a new product or feature you want to implement? Plans for continued support and maintenance are available."}],e.posts=o.query(),e.form={},e.sendMail=function(){var t={contactName:this.contactName,contactCompany:this.contactCompany,contactEmail:this.contactEmail,contactMessage:this.contactMessage};s.post("/contact-form",t).success(function(t,o,r,s){n.notify("Thank you for your message "+t.contactName),e.form.contactForm.$setPristine(),e.form.contactForm.$setUntouched()}).error(function(e,t,o,r){n.notify("There was an error processing your request. Please try again")}),this.contactName=null,this.contactCompany=null,this.contactEmail=null,this.contactMessage=null},e.getUser=function(t){r.getUser(t).then(function(t){e.twitterErrors=void 0,e.tweets=JSON.parse(t.result.userData)}).catch(function(t){console.error("there was an error retrieving data: ",t),e.twitterErrors=t.error})}}]),angular.module("willsBlog").controller("navCtrl",["$scope","$location","$anchorScroll","$document",function(e,t,o,n){e.linkTo=function(e){var o=t.url(),r=60,s=800,a=angular.element(e);"/"!==o?t.url("/",function(){n.scrollToElement(a,r,s)}):n.scrollToElement(a,r,s)}}]),angular.module("willsBlog").controller("workCtrl",["$scope",function(e){e.tendrilShown=!1,e.toggleTendril=function(){e.tendrilShown=!e.tendrilShown},e.crownShow=!1,e.toggleCrown=function(){e.crownShow=!e.crownShow},e.broadShow=!1,e.toggleBroad=function(){e.broadShow=!e.broadShow},e.adihow=!1,e.toggleAdi=function(){e.adiShow=!e.adiShow}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFkbWluL3Byb2ZpbGVDdHJsLmpzIiwiYWRtaW4vdXNlckxpc3RDdHJsLmpzIiwiY29tbW9uL21vZGFsRGlyLmpzIiwiY29tbW9uL25vdGlmaWVyLmpzIiwiY29tbW9uL3BhZ2UuanMiLCJjb21tb24vc21vb3RoU2Nyb2xsLmpzIiwiY29tbW9uL3R3aXR0ZXIuanMiLCJibG9nL2Jsb2dMaXN0Q3RybC5qcyIsImJsb2cvZWRpdFBvc3RDdHJsLmpzIiwiYmxvZy9tdkNhY2hlZFBvc3QuanMiLCJibG9nL212UG9zdC5qcyIsImJsb2cvbmV3UG9zdEN0cmwuanMiLCJibG9nL3Bvc3REZXRhaWxDdHJsLmpzIiwibG9naW4vaWRlbnRpdHkuanMiLCJsb2dpbi9sb2dpbkN0cmwuanMiLCJsb2dpbi9tdkF1dGguanMiLCJsb2dpbi9tdlVzZXIuanMiLCJsb2dpbi9zaWdudXBDdHJsLmpzIiwibWFpbi9jYXJvdXNlbEN0cmwuanMiLCJtYWluL21haW5DdHJsLmpzIiwibWFpbi9uYXZDdHJsLmpzIiwibWFpbi93b3JrQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsImh0bWw1TW9kZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicmVzb2x2ZSIsInJvdXRlUm9sZUNoZWNrIiwibXZBdXRoIiwiYXV0aG9yaXplQXV0aGV0aWNhdGVkVXNlckZvclJvdXRlIiwiYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSIsInJ1biIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCIkc3RhdGVQYXJhbXMiLCIkb24iLCJldnQiLCJjdXJyZW50IiwicHJldmlvdXMiLCJyZWplY3Rpb24iLCJwYXRoIiwiZXZlbnQiLCJjdXJyZW50Um91dGUiLCJwcmV2aW91c1JvdXRlIiwid2luZG93Iiwic2Nyb2xsVG8iLCIkc2NvcGUiLCJpZGVudGl0eSIsIm5vdGlmaWVyIiwidXNlcm5hbWUiLCJjdXJyZW50VXNlciIsImZOYW1lIiwiZmlyc3ROYW1lIiwibE5hbWUiLCJsYXN0TmFtZSIsInVwZGF0ZSIsIm5ld1VzZXJEYXRhIiwicGFzc3dvcmQiLCJsZW5ndGgiLCJ1cGRhdGVDdXJyZW50VXNlciIsInRoZW4iLCJub3RpZnkiLCJyZWFzb24iLCJlcnJvciIsIm12VXNlciIsInVzZXJzIiwicXVlcnkiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInNjb3BlIiwic2hvdyIsInJlcGxhY2UiLCJ0cmFuc2NsdWRlIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsImRpYWxvZ1N0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJoaWRlTW9kYWwiLCJ2YWx1ZSIsInRvYXN0ciIsImZhY3RvcnkiLCJUb2FzdHIiLCJtZXNzYWdlIiwic3VjY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJ0aXRsZSIsImRlc2MiLCJzZXRUaXRsZSIsIm5ld1RpdGxlIiwiZGVzY3JpcHRpb24iLCJzZXREZXNjIiwibmV3RGVzYyIsIk1ldGEiLCJtZXRhRGVzYyIsInNlcnZpY2UiLCJ0aGlzIiwiZUlEIiwiZWxtWVBvc2l0aW9uIiwiZWxtIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInkiLCJvZmZzZXRUb3AiLCJub2RlIiwib2Zmc2V0UGFyZW50IiwiYm9keSIsImN1cnJlbnRZUG9zaXRpb24iLCJzZWxmIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJzdGFydFkiLCJzdG9wWSIsImRpc3RhbmNlIiwic3BlZWQiLCJNYXRoIiwicm91bmQiLCJzdGVwIiwibGVhcFkiLCJ0aW1lciIsImkiLCJzZXRUaW1lb3V0IiwiJGh0dHAiLCIkcSIsImdldFVzZXIiLCJkIiwiZGVmZXIiLCJwb3N0IiwiZGF0YSIsInJlamVjdCIsInByb21pc2UiLCJtdkNhY2hlZFBvc3QiLCJwb3N0cyIsInNvcnRPcHRpb25zIiwidGV4dCIsInNvcnRPcmRlciIsIm12UG9zdCIsImdldCIsInNsdWciLCJfaWQiLCJjYXRlZ29yaWVzIiwiaGVhZGVySW1hZ2UiLCJleGNlcnB0IiwiYXV0aG9yIiwidXBkYXRlUG9zdCIsIiR1cGRhdGUiLCJkZWxldGVQb3N0IiwiJGRlbGV0ZSIsInBvc3RMaXN0IiwiJHJlc291cmNlIiwibWV0aG9kIiwic3RyaXBUcmFpbGluZ1NsYXNoZXMiLCJjcmVhdGVOZXdQb3N0IiwiJHNhdmUiLCJjYW5jZWwiLCIkd2luZG93IiwiYm9vdHN0cmFwcGVkVXNlck9iamVjdCIsImV4dGVuZCIsImlzQXV0aGVudGljYXRlZCIsImlzQXV0aG9yaXplZCIsInJvbGUiLCJyb2xlcyIsImluZGV4T2YiLCJzaWduSW4iLCJhdXRoZW50aWNhdGVVc2VyIiwiYWN0U2hvd24iLCJzaWduT3V0IiwibG9nb3V0VXNlciIsInNpZ251cCIsImNyZWF0ZVVzZXIiLCJ0b2dnbGVBY2NvdW50Iiwic2lnbnVwU2hvd24iLCJ0b2dnbGVTaWdudXAiLCJkZWZlcnJlZCIsInJlc3BvbnNlIiwidXNlciIsImxvZ291dCIsInVuZGVmaW5lZCIsIm5ld1VzZXIiLCJjbG9uZSIsImNvcHkiLCJVc2VyUmVzb3VyY2UiLCJpc0FycmF5IiwicHJvdG90eXBlIiwiaXNBZG1pbiIsInNsaWRlcyIsIm5hbWUiLCJzdmciLCJjdXJyZW50SW5kZXgiLCJzZXRDdXJyZW50U2xpZGVJbmRleCIsImluZGV4IiwiaXNDdXJyZW50U2xpZGVJbmRleCIsImFuaW1hdGlvbiIsImFkZENsYXNzIiwiY2xhc3NOYW1lIiwiZG9uZSIsIlR3ZWVuTWF4IiwidG8iLCJsZWZ0IiwicGFyZW50Iiwib25Db21wbGV0ZSIsInJlbW92ZUNsYXNzIiwic2V0IiwiVHdpdHRlclNlcnZpY2UiLCJzZXJ2aWNlcyIsIm1vcmUiLCJmb3JtIiwic2VuZE1haWwiLCJjb250YWN0TmFtZSIsImNvbnRhY3RDb21wYW55IiwiY29udGFjdEVtYWlsIiwiY29udGFjdE1lc3NhZ2UiLCJzdGF0dXMiLCJoZWFkZXJzIiwiY29udGFjdEZvcm0iLCIkc2V0UHJpc3RpbmUiLCIkc2V0VW50b3VjaGVkIiwidHdpdHRlckVycm9ycyIsInR3ZWV0cyIsIkpTT04iLCJwYXJzZSIsInJlc3VsdCIsInVzZXJEYXRhIiwiY2F0Y2giLCIkYW5jaG9yU2Nyb2xsIiwiJGRvY3VtZW50IiwibGlua1RvIiwiaWQiLCJyb3V0ZSIsIm9mZnNldCIsImR1cmF0aW9uIiwic2Nyb2xsVG9FbGVtZW50IiwidGVuZHJpbFNob3duIiwidG9nZ2xlVGVuZHJpbCIsImNyb3duU2hvdyIsInRvZ2dsZUNyb3duIiwiYnJvYWRTaG93IiwidG9nZ2xlQnJvYWQiLCJhZGlob3ciLCJ0b2dnbGVBZGkiLCJhZGlTaG93Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxhQUFBLGFBQUEsWUFBQSxhQUFBLFlBQUEsYUFFQUQsUUFBQUMsT0FBQSxhQUFBQyxRQUFBLG9CQUFBLGlCQUFBLHFCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBV0FBLEVBQUFDLFVBQUEsS0FFQUgsRUFBQUksV0FBQSxHQUVBSCxFQUNBSSxNQUFBLFFBQ0FDLElBQUEsSUFDQUMsWUFBQSxzQkFDQUMsV0FBQSxhQUVBSCxNQUFBLFdBQ0FDLElBQUEsV0FDQUMsWUFBQSx3QkFDQUMsV0FBQSxjQUVBSCxNQUFBLFVBQ0FDLElBQUEsVUFDQUMsWUFBQSx5QkFDQUMsV0FBQSxlQUVBSCxNQUFBLFNBQ0FDLElBQUEsU0FDQUMsWUFBQSwyQkFDQUMsV0FBQSxpQkFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsY0FDQUMsU0FDQUMsZ0JBQUEsU0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLHlDQUlBUCxNQUFBLGNBQ0FDLElBQUEsZUFDQUMsWUFBQSw2QkFDQUMsV0FBQSxtQkFFQUgsTUFBQSxXQUNBQyxJQUFBLGtCQUNBQyxZQUFBLDBCQUNBQyxXQUFBLGNBQ0FDLFNBQ0FDLGdCQUFBLFNBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFB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RUFBQWtNLFlBQUEsV0FDQWxNLEVBQUFpTSxXQUFBak0sRUFBQWlNLFdBR0FqTSxFQUFBbU0sUUFBQSxFQUNBbk0sRUFBQW9NLFVBQUEsV0FDQXBNLEVBQUFxTSxTQUFBck0sRUFBQXFNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJywgWyduZ1Jlc291cmNlJywgJ25nQW5pbWF0ZScsICduZ1Nhbml0aXplJywgJ3VpLnJvdXRlcicsICdkdVNjcm9sbCddKTtcblxuYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsIGZ1bmN0aW9uKCRsb2NhdGlvblByb3ZpZGVyLCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKXtcblxuICAgIHZhciByb3V0ZVJvbGVDaGVja3MgPSB7XG4gICAgICBhZG1pbjogZnVuY3Rpb24obXZBdXRoKXtcbiAgICAgICAgICByZXR1cm4gbXZBdXRoLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7XG4gICAgICB9LFxuICAgICAgdXNlcjogZnVuY3Rpb24obXZBdXRoKXtcbiAgICAgICAgICByZXR1cm4gbXZBdXRoLmF1dGhvcml6ZUF1dGhldGljYXRlZFVzZXJGb3JSb3V0ZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgLnN0YXRlKCdob21lJywge1xuICAgICAgdXJsOiAnLycsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9tYWluL21haW4nLFxuICAgICAgY29udHJvbGxlcjogJ21haW5DdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdhY2NvdW50Jywge1xuICAgICAgdXJsOiAnL2FjY291bnQnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvbG9naW4vbG9naW4nLFxuICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnc2lnbnVwJywge1xuICAgICAgdXJsOiAnL3NpZ251cCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9sb2dpbi9zaWdudXAnLFxuICAgICAgY29udHJvbGxlcjogJ3NpZ251cEN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ3Bvc3RzJywge1xuICAgICAgdXJsOiAnL3Bvc3RzJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Jsb2cvYmxvZy1saXN0JyxcbiAgICAgIGNvbnRyb2xsZXI6ICdibG9nTGlzdEN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XG4gICAgICB1cmw6ICcvcHJvZmlsZScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9hZG1pbi9wcm9maWxlJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdwcm9maWxlQ3RybCcsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIHJvdXRlUm9sZUNoZWNrOiBbJ212QXV0aCcsIGZ1bmN0aW9uKG12QXV0aCl7XG4gICAgICAgICAgICByZXR1cm4gbXZBdXRoLmF1dGhvcml6ZUF1dGhldGljYXRlZFVzZXJGb3JSb3V0ZSgpO1xuICAgICAgICB9XG4gICAgICBdfVxuICAgIH0pXG4gICAgLnN0YXRlKCdwb3N0RGV0YWlsJywgeyAvL3ZpZXcgc2luZ2xlIHBvc3RcbiAgICAgIHVybDogJy9wb3N0cy86c2x1ZycsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9ibG9nL3Bvc3QtZGV0YWlsJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdwb3N0RGV0YWlsQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbmV3UG9zdCcsIHsgIC8vYWRkaW5nIGEgbmV3IHBvc3RcbiAgICAgIHVybDogJy9hZG1pbi9uZXctcG9zdCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9ibG9nL25ldy1wb3N0JyxcbiAgICAgIGNvbnRyb2xsZXI6ICduZXdQb3N0Q3RybCcsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIHJvdXRlUm9sZUNoZWNrOiBbJ212QXV0aCcsIGZ1bmN0aW9uKG12QXV0aCl7XG4gICAgICAgICAgICByZXR1cm4gbXZBdXRoLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7XG4gICAgICAgIH1cbiAgICAgIF19XG4gICAgfSlcbiAgICAuc3RhdGUoJ2VkaXRQb3N0JywgeyAgLy9lZGl0IHBvc3RcbiAgICAgIHVybDogJy9hZG1pbi86c2x1Zy9lZGl0JyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Jsb2cvZWRpdC1wb3N0JyxcbiAgICAgIGNvbnRyb2xsZXI6ICdlZGl0UG9zdEN0cmwnLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICByb3V0ZVJvbGVDaGVjazogWydtdkF1dGgnLCBmdW5jdGlvbihtdkF1dGgpe1xuICAgICAgICAgICAgcmV0dXJuIG12QXV0aC5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdhZG1pbicpO1xuICAgICAgICB9XG4gICAgICBdfVxuICAgIH0pXG4gICAgLnN0YXRlKCd1c2VycycsIHtcbiAgICAgIHVybDogJy9hZG1pbi91c2VycycsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9hZG1pbi91c2Vycy1saXN0JyxcbiAgICAgIGNvbnRyb2xsZXI6ICd1c2VyTGlzdEN0cmwnLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICByb3V0ZVJvbGVDaGVjazogWydtdkF1dGgnLCBmdW5jdGlvbihtdkF1dGgpe1xuICAgICAgICAgICAgcmV0dXJuIG12QXV0aC5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdhZG1pbicpO1xuICAgICAgICB9XG4gICAgICBdfVxuICAgIH0pO1xuXG59XSk7Ly9lbmQgY29uZmlnXG5cblxuYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLnJ1bihbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyRzdGF0ZVBhcmFtcycgLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzdGF0ZVBhcmFtcyl7XG5cbiAgLy8kYW5jaG9yU2Nyb2xsLnlPZmZzZXQgPSA2MDtcblxuICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbihldnQsIGN1cnJlbnQsIHByZXZpb3VzLCByZWplY3Rpb24pIHtcbiAgICAgIGlmKHJlamVjdGlvbiA9PT0gJ25vdCBhdXRob3JpemVkJykge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgfVxuICB9KTtcblxuICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50Um91dGUsIHByZXZpb3VzUm91dGUpIHtcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gIH0pO1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29udHJvbGxlcigncHJvZmlsZUN0cmwnLCBbJyRzY29wZScsICdtdkF1dGgnLCAnaWRlbnRpdHknLCAnbm90aWZpZXInLCBmdW5jdGlvbigkc2NvcGUsIG12QXV0aCwgaWRlbnRpdHksIG5vdGlmaWVyKXtcbiAgJHNjb3BlLnVzZXJuYW1lID0gaWRlbnRpdHkuY3VycmVudFVzZXIudXNlcm5hbWU7XG4gICRzY29wZS5mTmFtZSA9IGlkZW50aXR5LmN1cnJlbnRVc2VyLmZpcnN0TmFtZTtcbiAgJHNjb3BlLmxOYW1lID0gaWRlbnRpdHkuY3VycmVudFVzZXIubGFzdE5hbWU7XG5cbiAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbmV3VXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAkc2NvcGUudXNlcm5hbWUsXG4gICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLmZOYW1lLFxuICAgICAgICBsYXN0TmFtZTogJHNjb3BlLmxOYW1lXG4gICAgICB9XG5cbiAgICAgIGlmKCRzY29wZS5wYXNzd29yZCAmJiAkc2NvcGUucGFzc3dvcmQubGVuZ3RoID4gMCkge1xuICAgICAgIG5ld1VzZXJEYXRhLnBhc3N3b3JkID0gJHNjb3BlLnBhc3N3b3JkO1xuICAgICAgfVxuXG4gICAgICBtdkF1dGgudXBkYXRlQ3VycmVudFVzZXIobmV3VXNlckRhdGEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgbm90aWZpZXIubm90aWZ5KCdZb3VyIGluZm9ybWF0aW9uIGhhcyBiZWVuIHVwZGF0ZWQnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgICBub3RpZmllci5lcnJvcihyZWFzb24pO1xuICAgICAgICB9KTtcbiAgfVxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29udHJvbGxlcigndXNlckxpc3RDdHJsJywgWyckc2NvcGUnLCAnbXZVc2VyJywgZnVuY3Rpb24oJHNjb3BlLCBtdlVzZXIpe1xuICAkc2NvcGUudXNlcnMgPSBtdlVzZXIucXVlcnkoKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5kaXJlY3RpdmUoJ2dsb2JhbE1vZGFsJywgZnVuY3Rpb24oKXtcbiAgcmV0dXJue1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgc2NvcGU6IHtcbiAgICAgIHNob3c6ICc9J1xuICAgIH0sXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xuICAgICAgc2NvcGUuZGlhbG9nU3R5bGUgPSB7fTtcbiAgICAgIGlmKGF0dHJzLndpZHRoKVxuICAgICAgICBzY29wZS5kaWFsb2dTdHlsZS53aWR0aCA9IGF0dHJzLndpZHRoO1xuICAgICAgaWYgKGF0dHJzLmhlaWdodClcbiAgICAgICAgc2NvcGUuZGlhbG9nU3R5bGUuaGVpZ2h0ID0gYXR0cnMuaGVpZ2h0O1xuXG4gICAgICBzY29wZS5oaWRlTW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgICBzY29wZS5zaG93ID0gZmFsc2U7XG4gICAgICB9O1xuICAgIH0sXG4gICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvY29tbW9uL21vZGFsJ1xuICB9XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS52YWx1ZSgnVG9hc3RyJywgdG9hc3RyKTtcblxuYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmZhY3RvcnkoJ25vdGlmaWVyJywgWydUb2FzdHInLCBmdW5jdGlvbihUb2FzdHIpe1xuICByZXR1cm4ge1xuICAgIG5vdGlmeTogZnVuY3Rpb24obWVzc2FnZSl7XG4gICAgICBUb2FzdHIuc3VjY2VzcyhtZXNzYWdlKTtcbiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgIH0sXG4gICAgZXJyb3I6IGZ1bmN0aW9uKG1lc3NhZ2Upe1xuICAgICAgVG9hc3RyLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgfVxuICB9XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuZmFjdG9yeSgnTWV0YScsIGZ1bmN0aW9uKCl7XG4gIHZhciB0aXRsZSA9ICdXZWIgRGV2ZWxvcG1lbnQsIERlbnZlciwgQ08nO1xuICB2YXIgZGVzYyA9ICdJIGVuam95IGFsbCB0aGluZ3Mgd2ViIGRldmVsb3BtZW50IGFuZCBhbSBhbHdheXMgYWN0aXZlbHkgbGVhcm5pbmcgdGhlIG5ld2VzdCB0ZWNobmlxdWVzIGFuZCBsYW5nYXVnZXMuIElmIHlvdSBoYXZlIGEgd2ViIGRlc2lnbiBvciBkZXZlbG9wbWVudCBwcm9qZWN0LCBnaXZlIG1lIGEgc2hvdXQsIEkgd291bGQgbG92ZSB0byB0YWxrIGFib3V0IGl0Lic7XG4gIHJldHVybiB7XG4gICAgdGl0bGU6IGZ1bmN0aW9uKCkge3JldHVybiB0aXRsZTt9LFxuICAgIHNldFRpdGxlOiBmdW5jdGlvbihuZXdUaXRsZSkgeyB0aXRsZSA9IG5ld1RpdGxlIH0sXG4gICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVzYzt9LFxuICAgIHNldERlc2MgOiBmdW5jdGlvbihuZXdEZXNjKSB7IGRlc2MgPSBuZXdEZXNjfVxuICB9XG59KVxuLmNvbnRyb2xsZXIoJ21ldGFDdHJsJywgWyckc2NvcGUnLCAnTWV0YScsIGZ1bmN0aW9uKCRzY29wZSwgTWV0YSl7XG4gICRzY29wZS5NZXRhID0gTWV0YTtcbiAgJHNjb3BlLm1ldGFEZXNjID0gTWV0YTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5zZXJ2aWNlKCdzbW9vdGhTY3JvbGwnLCBbJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCRsb2NhdGlvbil7XG5cbiAgdGhpcy5zY3JvbGxUbyA9IGZ1bmN0aW9uKGVJRCkge1xuXG4gICAgdmFyIHN0YXJ0WSA9IGN1cnJlbnRZUG9zaXRpb24oKTtcbiAgICB2YXIgc3RvcFkgPSBlbG1ZUG9zaXRpb24oZUlEKTtcbiAgICB2YXIgZGlzdGFuY2UgPSBzdG9wWSA+IHN0YXJ0WSA/IHN0b3BZIC0gc3RhcnRZIDogc3RhcnRZIC0gc3RvcFk7XG4gICAgaWYgKGRpc3RhbmNlIDwgMTAwKSB7XG4gICAgICAgIHNjcm9sbFRvKDAsIHN0b3BZKTsgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3BlZWQgPSBNYXRoLnJvdW5kKGRpc3RhbmNlIC8gMTAwKTtcbiAgICBpZiAoc3BlZWQgPj0gMjApIHNwZWVkID0gMjA7XG4gICAgdmFyIHN0ZXAgPSBNYXRoLnJvdW5kKGRpc3RhbmNlIC8gMjUpO1xuICAgIHZhciBsZWFwWSA9IHN0b3BZID4gc3RhcnRZID8gc3RhcnRZICsgc3RlcCA6IHN0YXJ0WSAtIHN0ZXA7XG4gICAgdmFyIHRpbWVyID0gMDtcbiAgICBpZiAoc3RvcFkgPiBzdGFydFkpIHtcbiAgICAgICAgZm9yICggdmFyIGk9c3RhcnRZOyBpPHN0b3BZOyBpKz1zdGVwICkge1xuICAgICAgICAgICAgc2V0VGltZW91dChcIndpbmRvdy5zY3JvbGxUbygwLCBcIitsZWFwWStcIilcIiwgdGltZXIgKiBzcGVlZCk7XG4gICAgICAgICAgICBsZWFwWSArPSBzdGVwOyBpZiAobGVhcFkgPiBzdG9wWSkgbGVhcFkgPSBzdG9wWTsgdGltZXIrKztcbiAgICAgICAgfSByZXR1cm47XG4gICAgfVxuICAgIGZvciAoIHZhciBpPXN0YXJ0WTsgaT5zdG9wWTsgaS09c3RlcCApIHtcbiAgICAgICAgc2V0VGltZW91dChcIndpbmRvdy5zY3JvbGxUbygwLCBcIitsZWFwWStcIilcIiwgdGltZXIgKiBzcGVlZCk7XG4gICAgICAgIGxlYXBZIC09IHN0ZXA7IGlmIChsZWFwWSA8IHN0b3BZKSBsZWFwWSA9IHN0b3BZOyB0aW1lcisrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVsbVlQb3NpdGlvbihlSUQpIHtcbiAgICAgIHZhciBlbG0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlSUQpO1xuICAgICAgdmFyIHkgPSBlbG0ub2Zmc2V0VG9wO1xuICAgICAgdmFyIG5vZGUgPSBlbG07XG4gICAgICB3aGlsZSAobm9kZS5vZmZzZXRQYXJlbnQgJiYgbm9kZS5vZmZzZXRQYXJlbnQgIT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgIG5vZGUgPSBub2RlLm9mZnNldFBhcmVudDtcbiAgICAgICAgICB5ICs9IG5vZGUub2Zmc2V0VG9wO1xuICAgICAgfSByZXR1cm4geTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjdXJyZW50WVBvc2l0aW9uKCkge1xuICAgICAgLy8gRmlyZWZveCwgQ2hyb21lLCBPcGVyYSwgU2FmYXJpXG4gICAgICBpZiAoc2VsZi5wYWdlWU9mZnNldCkgcmV0dXJuIHNlbGYucGFnZVlPZmZzZXQ7XG4gICAgICAvLyBJbnRlcm5ldCBFeHBsb3JlciA2IC0gc3RhbmRhcmRzIG1vZGVcbiAgICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcClcbiAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgIC8vIEludGVybmV0IEV4cGxvcmVyIDYsIDcgYW5kIDhcbiAgICAgIGlmIChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkgcmV0dXJuIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gIH1cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmZhY3RvcnkoJ1R3aXR0ZXJTZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uKCRodHRwLCAkcSl7XG5cbiAgdmFyIGdldFVzZXIgPSBmdW5jdGlvbih1c2VybmFtZSl7XG4gICAgdmFyIGQgPSAkcS5kZWZlcigpO1xuXG4gICAgJGh0dHAucG9zdCgnL3R3aXR0ZXIvdXNlcicsIHt1c2VybmFtZSA6IHVzZXJuYW1lfSlcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICByZXR1cm4gZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIHJldHVybiBkLnJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkLnByb21pc2U7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBnZXRVc2VyIDogZ2V0VXNlclxuICAgIH1cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5jb250cm9sbGVyKCdibG9nTGlzdEN0cmwnLCBbJyRzY29wZScsICdtdkNhY2hlZFBvc3QnLCAnaWRlbnRpdHknLCAnJGxvY2F0aW9uJywgJ01ldGEnLCAgZnVuY3Rpb24oJHNjb3BlLCBtdkNhY2hlZFBvc3QsIGlkZW50aXR5LCAkbG9jYXRpb24sIE1ldGEpe1xuXG4gIE1ldGEuc2V0VGl0bGUoJ0Jsb2cnKTtcblxuICAkc2NvcGUucG9zdHMgPSBtdkNhY2hlZFBvc3QucXVlcnkoKTtcblxuICAkc2NvcGUuaWRlbnRpdHkgPSBpZGVudGl0eTtcblxuICAkc2NvcGUuc29ydE9wdGlvbnM9IFtcbiAgICB7dmFsdWU6ICd0aXRsZScsIHRleHQ6ICdTb3J0IGJ5IFRpdGxlJ30sXG4gICAge3ZhbHVlOiAncHVibGlzaGVkJywgdGV4dDogJ1B1Ymxpc2hlZCBEYXRlJ31dO1xuXG4gICRzY29wZS5zb3J0T3JkZXIgPSAkc2NvcGUuc29ydE9wdGlvbnNbMF0udmFsdWU7XG59XSk7XG4iLCIgYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ2VkaXRQb3N0Q3RybCcsIFsnJHNjb3BlJywgJ25vdGlmaWVyJywgJ212UG9zdCcsICckcScsICckbG9jYXRpb24nLCAnJHN0YXRlUGFyYW1zJywgZnVuY3Rpb24oJHNjb3BlLCBub3RpZmllciwgbXZQb3N0LCAkcSwgJGxvY2F0aW9uLCAkc3RhdGVQYXJhbXMpe1xuXG4gICAgJHNjb3BlLnBvc3QgPSBtdlBvc3QuZ2V0KHsgc2x1ZzogJHN0YXRlUGFyYW1zLnNsdWcgfSk7XG5cbiAgICAkc2NvcGUucG9zdC5kYXRhID0ge1xuICAgICAgICBfaWQ6ICRzY29wZS5wb3N0Ll9pZCxcbiAgICAgICAgdGl0bGUgOiAkc2NvcGUucG9zdC50aXRsZSxcbiAgICAgICAgc2x1ZzogJHNjb3BlLnBvc3Quc2x1ZyxcbiAgICAgICAgY2F0ZWdvcmllcyA6ICRzY29wZS5wb3N0LmNhdGVnb3JpZXMsXG4gICAgICAgIGhlYWRlckltYWdlIDogJHNjb3BlLnBvc3QuaGVhZGVySW1hZ2UsXG4gICAgICAgIGV4Y2VycHQgOiAkc2NvcGUucG9zdC5leGNlcnB0LFxuICAgICAgICBib2R5IDogJHNjb3BlLnBvc3QuYm9keSxcbiAgICAgICAgYXV0aG9yOiAkc2NvcGUucG9zdC5hdXRob3JcbiAgICB9XG5cbiAgICAkc2NvcGUudXBkYXRlUG9zdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5wb3N0LiR1cGRhdGUoIHsgc2x1ZzogJHNjb3BlLnBvc3Quc2x1ZyB9LCBmdW5jdGlvbigpe1xuICAgICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnWW91ciBwb3N0IGhhcyBiZWVuIHVwZGF0ZWQnKTtcbiAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2Jsb2cnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgICBub3RpZmllci5lcnJvcihyZWFzb24uZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5kZWxldGVQb3N0ID0gZnVuY3Rpb24oKXtcbiAgICAgICRzY29wZS5wb3N0LiRkZWxldGUoeyBzbHVnOiAkc2NvcGUucG9zdC5zbHVnIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICBub3RpZmllci5ub3RpZnkoJ0RlbGV0ZWQgZnJvbSBzZXJ2ZXInKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ibG9nJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5mYWN0b3J5KCdtdkNhY2hlZFBvc3QnLCBbJ212UG9zdCcsIGZ1bmN0aW9uKG12UG9zdCl7XG4gIHZhciBwb3N0TGlzdDtcblxuICByZXR1cm4ge1xuICAgIHF1ZXJ5OiBmdW5jdGlvbigpe1xuICAgICAgaWYoIXBvc3RMaXN0KXtcbiAgICAgICAgcG9zdExpc3QgPSBtdlBvc3QucXVlcnkoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBvc3RMaXN0O1xuICAgIH1cbiAgfVxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuZmFjdG9yeSgnbXZQb3N0JywgWyckcmVzb3VyY2UnLCBmdW5jdGlvbigkcmVzb3VyY2Upe1xuXG4gIHJldHVybiAkcmVzb3VyY2UoJy9hcGkvcG9zdHMvOnNsdWcnLCB7c2x1ZzogJ0BzbHVnJ30sIHtcbiAgICB1cGRhdGUgOiB7XG4gICAgICBtZXRob2Q6ICdQVVQnXG4gICAgfVxuICB9LCB7XG4gICAgc3RyaXBUcmFpbGluZ1NsYXNoZXM6IGZhbHNlXG4gIH0pO1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29udHJvbGxlcignbmV3UG9zdEN0cmwnLCBbJyRzY29wZScsICdub3RpZmllcicsICdtdlBvc3QnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24oJHNjb3BlLCBub3RpZmllciwgbXZQb3N0LCAkbG9jYXRpb24pe1xuXG4gICRzY29wZS5wb3N0ID0gbmV3IG12UG9zdCgpO1xuXG4gICRzY29wZS5jcmVhdGVOZXdQb3N0ID0gZnVuY3Rpb24oKXtcbiAgICAkc2NvcGUucG9zdC4kc2F2ZShmdW5jdGlvbigpe1xuICAgICAgICBub3RpZmllci5ub3RpZnkoJ05ldyBQb3N0IENyZWF0ZWQnKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ibG9nJyk7XG4gICAgfSk7XG4gIH1cblxuICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKXtcbiAgICAkbG9jYXRpb24ucGF0aCgnL2Jsb2cnKTtcbiAgfTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ3Bvc3REZXRhaWxDdHJsJywgWyckc2NvcGUnLCAnbXZDYWNoZWRQb3N0JywgJ212UG9zdCcsICckc3RhdGVQYXJhbXMnLCAnTWV0YScsICBmdW5jdGlvbigkc2NvcGUsIG12Q2FjaGVkUG9zdCwgbXZQb3N0LCAkc3RhdGVQYXJhbXMsIE1ldGEpe1xuXG4gIC8vIG12Q2FjaGVkUG9zdC5xdWVyeSgpLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oY29sbGVjdGlvbil7XG4gIC8vICAgY29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKHBvc3Qpe1xuICAvLyAgICAgaWYocG9zdC5faWQgPT09ICRzdGF0ZVBhcmFtcy5pZCl7XG4gIC8vICAgICAgICRzY29wZS5wb3N0ID0gcG9zdDtcbiAgLy8gICAgIH1cbiAgLy8gICB9KTtcbiAgLy8gfSk7XG5cbiAgICRzY29wZS5wb3N0ID0gbXZQb3N0LmdldCh7IHNsdWc6ICRzdGF0ZVBhcmFtcy5zbHVnIH0sIGZ1bmN0aW9uKCl7XG4gICAgIHZhciB0aXRsZSA9ICRzY29wZS5wb3N0LnRpdGxlO1xuICAgICB2YXIgZGVzYyA9ICRzY29wZS5wb3N0LmV4Y2VycHQ7XG4gICAgIE1ldGEuc2V0VGl0bGUodGl0bGUpO1xuICAgICBNZXRhLnNldERlc2MoZGVzYyk7XG4gICB9KTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmZhY3RvcnkoJ2lkZW50aXR5JywgWyckd2luZG93JywgJ212VXNlcicsIGZ1bmN0aW9uKCR3aW5kb3csIG12VXNlcil7XG5cbiAgdmFyIGN1cnJlbnRVc2VyO1xuICBpZighISR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdCkge1xuICAgIGN1cnJlbnRVc2VyID0gbmV3IG12VXNlcigpO1xuICAgIGFuZ3VsYXIuZXh0ZW5kKGN1cnJlbnRVc2VyLCAkd2luZG93LmJvb3RzdHJhcHBlZFVzZXJPYmplY3QpO1xuICB9XG4gIHJldHVybiB7XG4gICAgY3VycmVudFVzZXI6IGN1cnJlbnRVc2VyLFxuICAgIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXI7XG4gICAgfSxcblxuICAgIGlzQXV0aG9yaXplZDogZnVuY3Rpb24ocm9sZSl7XG4gICAgICByZXR1cm4gISF0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIucm9sZXMuaW5kZXhPZihyb2xlKSA+IC0xO1xuICAgIH1cblxuICB9XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5jb250cm9sbGVyKCdsb2dpbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICdpZGVudGl0eScsICdub3RpZmllcicsICdtdkF1dGgnLCAnJGxvY2F0aW9uJywgJ01ldGEnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBpZGVudGl0eSwgbm90aWZpZXIsIG12QXV0aCwgJGxvY2F0aW9uLCBNZXRhKXtcblxuICAgIE1ldGEuc2V0VGl0bGUoJ0FjY291bnQnKTtcblxuICAgICRzY29wZS5pZGVudGl0eSA9IGlkZW50aXR5O1xuXG4gICAgJHNjb3BlLnNpZ25JbiA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCl7XG4gICAgICBtdkF1dGguYXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24oc3VjY2Vzcyl7XG4gICAgICAgIGlmKHN1Y2Nlc3Mpe1xuICAgICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnWW91IGhhdmUgc2lnbmVkIGluJyk7XG4gICAgICAgICAgJGxvY2F0aW9uLnVybCgnL2FjY291bnQnKTtcbiAgICAgICAgICAkc2NvcGUuYWN0U2hvd24gPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub3RpZmllci5ub3RpZnkoJ1VzZXJuYW1lL1Bhc3N3b3JkIEluY29ycmVjdCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNpZ25PdXQgPSBmdW5jdGlvbigpe1xuICAgICAgbXZBdXRoLmxvZ291dFVzZXIoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudXNlcm5hbWUgPSAnJztcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnWW91IGhhdmUgbG9nZ2VkIG91dCcpO1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaWdudXAgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIG5ld1VzZXJEYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJHNjb3BlLnVzZXJuYW1lLFxuICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS5mTmFtZSxcbiAgICAgICAgbGFzdE5hbWU6ICRzY29wZS5sTmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZFxuICAgICAgfTtcbiAgICAgIG12QXV0aC5jcmVhdGVVc2VyKG5ld1VzZXJEYXRhKVxuICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnVXNlciBhY2NvdW50IGNyZWF0ZWQnKTtcbiAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgbm90aWZpZXIuZXJyb3IocmVhc29uKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKXtcbiAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfTtcblxuICAgICRzY29wZS5hY3RTaG93biA9IGZhbHNlO1xuICAgICRzY29wZS50b2dnbGVBY2NvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZihpZGVudGl0eS5pc0F1dGhlbnRpY2F0ZWQoKSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYWNjb3VudCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNjb3BlLmFjdFNob3duID0gISRzY29wZS5hY3RTaG93bjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLnNpZ251cFNob3duID0gZmFsc2U7XG4gICAgJHNjb3BlLnRvZ2dsZVNpZ251cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgJHNjb3BlLnNpZ251cFNob3duID0gISRzY29wZS5zaWdudXBTaG93bjtcbiAgICB9O1xuXG5cbn1dKTtcbiIsIlxuYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmZhY3RvcnkoJ212QXV0aCcsIFsnJGh0dHAnLCAnaWRlbnRpdHknLCAnJHEnLCAnbXZVc2VyJywgZnVuY3Rpb24oJGh0dHAsIGlkZW50aXR5LCAkcSwgbXZVc2VyKXtcblxuICByZXR1cm4ge1xuICAgIC8vIHRoaXMgdGhpbmcgd29ya2luZ1xuICAgIGF1dGhlbnRpY2F0ZVVzZXI6IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCl7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAkaHR0cC5wb3N0KCcvbG9naW4nLCB7XG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2Vzcyl7XG5cbiAgICAgICAgICB2YXIgdXNlciA9IG5ldyBtdlVzZXIoKTtcbiAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh1c2VyLCByZXNwb25zZS5kYXRhLnVzZXIpO1xuICAgICAgICAgIGlkZW50aXR5LmN1cnJlbnRVc2VyID0gdXNlcjtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSxcblxuICAgIGxvZ291dFVzZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgJGh0dHAucG9zdCgnL2xvZ291dCcsIHtsb2dvdXQ6IHRydWV9KS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlkZW50aXR5LmN1cnJlbnRVc2VyID0gdW5kZWZpbmVkO1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cbiAgICB9LFxuXG4gICAgYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZTogZnVuY3Rpb24ocm9sZSl7XG4gICAgICBpZiAoaWRlbnRpdHkuaXNBdXRob3JpemVkKCdhZG1pbicpKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdub3QgYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhdXRob3JpemVBdXRoZXRpY2F0ZWRVc2VyRm9yUm91dGU6IGZ1bmN0aW9uKCl7XG4gICAgICBpZiAoaWRlbnRpdHkuaXNBdXRoZW50aWNhdGVkKCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhIGN1cnJlbnQgdXNlcicpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjcmVhdGVVc2VyIDogZnVuY3Rpb24obmV3VXNlckRhdGEpIHtcbiAgICAgICB2YXIgbmV3VXNlciA9IG5ldyBtdlVzZXIobmV3VXNlckRhdGEpO1xuICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICBuZXdVc2VyLiRzYXZlKCkudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgaWRlbnRpdHkuY3VycmVudFVzZXIgPSBuZXdVc2VyO1xuICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXNwb25zZS5kYXRhLnJlYXNvbik7XG4gICAgICAgfSk7XG5cbiAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgdXBkYXRlQ3VycmVudFVzZXI6IGZ1bmN0aW9uKG5ld1VzZXJEYXRhKXtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgdmFyIGNsb25lID0gYW5ndWxhci5jb3B5KGlkZW50aXR5LmN1cnJlbnRVc2VyKTtcbiAgICAgICAgYW5ndWxhci5leHRlbmQoY2xvbmUsIG5ld1VzZXJEYXRhKTtcbiAgICAgICAgY2xvbmUuJHVwZGF0ZSgpLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICBpZGVudGl0eS5jdXJyZW50VXNlciA9IGNsb25lO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXNwb25zZS5kYXRhLnJlYXNvbik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgfS8vIHJldHVyblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuZmFjdG9yeSgnbXZVc2VyJywgWyckcmVzb3VyY2UnLCBmdW5jdGlvbigkcmVzb3VyY2Upe1xuXG4gIHZhciBVc2VyUmVzb3VyY2UgPSAkcmVzb3VyY2UoJy9hcGkvdXNlcnMvOmlkJywge19pZCA6ICdAaWQnfSwge1xuICAgIHVwZGF0ZToge21ldGhvZDogJ1BVVCcsIGlzQXJyYXk6IGZhbHNlfVxuICB9KTtcblxuICBVc2VyUmVzb3VyY2UucHJvdG90eXBlLmlzQWRtaW4gPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzLnJvbGVzICYmIHRoaXMucm9sZXMuaW5kZXhPZignYWRtaW4nKSA+IC0xO1xuICB9XG5cbiAgcmV0dXJuIFVzZXJSZXNvdXJjZTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ3NpZ251cEN0cmwnLCBbJyRzY29wZScsICdtdkF1dGgnLCAnbm90aWZpZXInLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24oJHNjb3BlLCBtdkF1dGgsIG5vdGlmaWVyLCAkbG9jYXRpb24pe1xuICAgICRzY29wZS5zaWdudXAgPSBmdW5jdGlvbigpe1xuXG4gICAgICB2YXIgbmV3VXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAkc2NvcGUudXNlcm5hbWUsXG4gICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLmZOYW1lLFxuICAgICAgICBsYXN0TmFtZTogJHNjb3BlLmxOYW1lLFxuICAgICAgICBwYXNzd29yZDogJHNjb3BlLnBhc3N3b3JkXG4gICAgICB9O1xuICAgICAgbXZBdXRoLmNyZWF0ZVVzZXIobmV3VXNlckRhdGEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgbm90aWZpZXIubm90aWZ5KCdVc2VyIGFjY291bnQgY3JlYXRlZCcpO1xuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICBub3RpZmllci5lcnJvcihyZWFzb24pO1xuICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgIH07XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5jb250cm9sbGVyKCdjYXJvdXNlbEN0cmwnLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSl7XG4gICRzY29wZS5zbGlkZXMgPSBbXG4gICAgeyBuYW1lOiAnTW9iaWxlJyxcbiAgICBzdmc6ICdtb2JpbGUtc3ZnJyxcbiAgICBkZXNjOiAnSXMgeW91ciB3ZWJzaXRlIHVwIHRvIGRhdGUgd2l0aCB0aGUgbW9zdCBjdXJyZW50IG1vYmlsZSBkZXNpZ24gdHJlbmRzPyBJZiBub3QsIHlvdSBhcmUgbG9vc2luZyB2YWx1YWJsZSBidXNpbmVzcy4gRW5zdXJlIHRoYXQgeW91ciBjdXN0b21lcnMgY2FuIHJlYWNoIHlvdXIgYnVzaW5lc3MgZnJvbSBhbnl3aGVyZSBhbmQgcmVjZWl2ZSB0aGUgYmVzdCB1c2VyIGV4cGVyaWVuY2UuIEJ5IGJ1aWxkaW5nIHdpdGggcmVzcG9uc2l2ZSBkZXNpZ24gaW4gbWluZCwgeW91ciBjdXN0b21lcnMgd2lsbCBnZXQgYSBwaXhlbCBwZXJmZWN0IGxvb2sgZnJvbSBtb2JpbGUgdG8gdGFibGV0IG9yIGRlc2t0b3AuJyB9LFxuXG4gICAgeyBuYW1lOiAnRUNvbW1lcmNlJyxcbiAgICBzdmc6ICdlY29tbS1zdmcnLFxuICAgIGRlc2M6ICdEbyB5b3UgaGF2ZSBhIG5ldyBwcm9kdWN0IHlvdSBhcmUgbG9va2luZyB0byBicmluZyB0byBtYXJrZXQgYW5kIG5lZWQgYW4gZS1jb21tZXJjZSBzaXRlIG9yIGp1c3QgbG9va2luZyBmb3IgbW9yZSBtb2Rlcm4gZmVlbCB0byBhbiBleGlzdGluZyBzaXRlPyAgQnkgdXRpbGl6aW5nIHJvYnVzdCBlY29tbWVyY2UgcGxhdGZvcm1zLCB3ZSBjYW4gZGVzaWduIGFuZCBkZXZlbG9wIGEgc2l0ZSB0aGF0IHdpbGwgc2NhbGUgd2l0aCB5b3VyIGJ1c2luZXNzIGFuZCBuZWVkcyBhbGwgaW4gdGltZSB0byBtZWV0IHlvdXIgYnVzeSBkZWFkbGluZXMuICcgfSxcblxuICAgIHsgbmFtZTogJ1NFTycsXG4gICAgc3ZnOiAnc2VvLXN2ZycsXG4gICAgZGVzYzogJ0hhdmluZyBhIG1vZGVybiBkZXNpZ24gYW5kIHVzZXIgZnJpZW5kbHkgd2Vic2l0ZSBpcyBncmVhdCwgYnV0IGlmIGN1c3RvbWVycyBjYW5gdCBmaW5kIHlvdXIgYnVzaW5lc3MsIGl0IHdvbnQgbWF0dGVyIG11Y2guICBXZSBkZXNpZ24gYW5kIGRldmVsb3AgZXZlcnkgYXNwZWN0IG9mIHRoZSB3ZWJzaXRlIHdpdGggc2VhcmNoIGVuZ2luZSBvcHRpbWl6YXRpb24gaW4gbWluZCBhbmQgc28geW91ciBjdXN0b21lcnMgY2FuIGZpbmQgeW91IGFtb25nIHRoZSBjb21wZXRpdGlvbi4gIEFsc28gdGhyb3VnaCByZXNlYXJjaCBhbmQgYW5hbHl0aWNzIHdlIGNhbiBkZXZlbG9wLCBwbGFuIGFuZCBkZXBsb3kgdGhlIGJlc3QgU0VPIGFuZCBtYXJrZXRpbmcgcHJhY3RpY2VzIHRvIGluY3JlYXNlIGNvbnZlcnNpb25zIGFuZCByZXRlbnRpb24uJyB9XG5cbiAgXTtcblxuICAkc2NvcGUuY3VycmVudEluZGV4ID0gMDtcbiAgJHNjb3BlLnNldEN1cnJlbnRTbGlkZUluZGV4ID0gZnVuY3Rpb24oaW5kZXgpe1xuICAgICRzY29wZS5jdXJyZW50SW5kZXggPSBpbmRleDtcbiAgfVxuICAkc2NvcGUuaXNDdXJyZW50U2xpZGVJbmRleCA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICByZXR1cm4gJHNjb3BlLmN1cnJlbnRJbmRleCA9PT0gaW5kZXg7XG4gIH1cbn1dKVxuXG4uYW5pbWF0aW9uKCcuc2xpZGUtYW5pbWF0aW9uJywgZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICBhZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBkb25lKXtcbiAgICAgIGlmIChjbGFzc05hbWUgPT0gJ25nLWhpZGUnKXtcbiAgICAgICAgICBUd2Vlbk1heC50byhlbGVtZW50LCAwLjUsIHtsZWZ0OiAtZWxlbWVudC5wYXJlbnQoKS53aWR0aCgpLCBvbkNvbXBsZXRlOiBkb25lIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZG9uZSl7XG4gICAgICBpZihjbGFzc05hbWUgPT0gJ25nLWhpZGUnKXtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnbmctaGlkZScpO1xuICAgICAgICBUd2Vlbk1heC5zZXQoZWxlbWVudCwgeyBsZWZ0OiBlbGVtZW50LnBhcmVudCgpLndpZHRoKCkgfSk7XG4gICAgICAgIFR3ZWVuTWF4LnRvKGVsZW1lbnQsIDAuNSwge2xlZnQ6IDAsIG9uQ29tcGxldGU6IGRvbmUgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb25lKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5jb250cm9sbGVyKCdtYWluQ3RybCcsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdtdkNhY2hlZFBvc3QnLCAnbm90aWZpZXInICwnVHdpdHRlclNlcnZpY2UnLCAnJGh0dHAnLCAnTWV0YScsIGZ1bmN0aW9uKCRzY29wZSwgJGxvY2F0aW9uLCBtdkNhY2hlZFBvc3QsIG5vdGlmaWVyLCBUd2l0dGVyU2VydmljZSwgJGh0dHAsIE1ldGEpe1xuXG4gIE1ldGEuc2V0VGl0bGUoJ0hvbWUnKTtcbiAgTWV0YS5zZXREZXNjKCdJIGVuam95IGFsbCB0aGluZ3Mgd2ViIGRldmVsb3BtZW50IGFuZCBhbSBhbHdheXMgYWN0aXZlbHkgbGVhcm5pbmcgdGhlIG5ld2VzdCB0ZWNobmlxdWVzIGFuZCBsYW5nYXVnZXMuIElmIHlvdSBoYXZlIGEgd2ViIGRlc2lnbiBvciBkZXZlbG9wbWVudCBwcm9qZWN0LCBnaXZlIG1lIGEgc2hvdXQsIEkgd291bGQgbG92ZSB0byB0YWxrIGFib3V0IGl0LicpO1xuXG4gICRzY29wZS5zZXJ2aWNlcyA9IFtcbiAgICB7IG5hbWU6ICdEZXZlbG9wbWVudCcsXG4gICAgc3ZnOiAnZGV2LWxvZ28nLFxuICAgIGRlc2NyaXB0aW9uOiAnQ3VzdG9taXplZCBhbmQgcmV1c2FibGUgY29kZSB1c2luZyB0aGUgbW9zdCB1cCB0byBkYXRlIEhUTUw1LCBDU1MzIGFuZCBKYXZhc2NyaXB0IGZyYW13b3Jrcy4gT3B0aW9ucyByYW5nZSBmcm9tIHN0YXRpYyBzaXRlcywgY29udGVudCBtYW5hZ2VkIHNpdGVzLCBhbmQgZWNvbW1lcmNlIHN0b3Jlcy4nLFxuICAgIG1vcmU6ICdEZXZlbG9wbWVudCBTa2lsbHMgaW5jbHVkZSBIVE1MNSwgQ1NTLCBKYXZhc2NyaXB0LCBBbmd1bGFyLCBCYWNrYm9uZSwgTm9kZSwgRXhwcmVzcywgQm9vc3RyYXAgYW5kIG1vcmUuJyB9LFxuXG4gICAgeyBuYW1lOiAnV2ViIERlc2lnbicsXG4gICAgc3ZnOiAnZGVzaWduLWxvZ28nLFxuICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRpbmcgYW4gZXhjZWxsZW50IHVzZXIgZXhwZXJpZW5jZSB0aHJvdWdoIGNsZWFuLCBzaW1wbGUgYW5kIHRob3JvdWdobHkgY3JhZnRlZCBkZXNpZ24uIENvbGxhYm9yYXRpb24gd2l0aCBjbGllbnRzIGR1cmluZyBkZXNpZ24gcHJvY2VzcyBlbnN1cmVzIGEgc3VwZXJiIGZpbmlzaGVkIHByb2plY3QuJyxcbiAgICBtb3JlOiAnU2VydmljZXMgaW5jbHVkZSB3aXJlIGZyYW1lcywgcGhvdG9zaG9wIG1vY2t1cHMsIGxvZ28gZGVzaWduLCBhbmQgY29tcGFueSBicmFuZGluZy4nIH0sXG5cbiAgICB7IG5hbWU6ICdTdXBwb3J0JyxcbiAgICBzdmc6ICdzdXAtbG9nbycsXG4gICAgZGVzY3JpcHRpb246ICdTdXBwb3J0IGlzIHJlYWRpbHkgYXZhaWxhYmxlIGZvciBjbGllbnRzIHdoZW4gYW55dGhpbmcgY29tZXMgdXAgYWxvbmcgdGhlIGRldmVsb3BtZW50IHByb2Nlc3MuIEFsc28gYXZhaWxhYmxlIGFyZSBwZXJzb25hbCBpbnN0cnVjdGlvbiBvbiBob3cgdG8gbWFpbnRhaW4gb3IgdXBkYXRlIHlvdXIgb3duIHNpdGUuJyxcbiAgICBtb3JlOiAnSGF2ZSBhIG5ldyBwcm9kdWN0IG9yIGZlYXR1cmUgeW91IHdhbnQgdG8gaW1wbGVtZW50PyBQbGFucyBmb3IgY29udGludWVkIHN1cHBvcnQgYW5kIG1haW50ZW5hbmNlIGFyZSBhdmFpbGFibGUuJyB9XG5cbiAgXTtcblxuICAkc2NvcGUucG9zdHMgPSBtdkNhY2hlZFBvc3QucXVlcnkoKTtcblxuICAkc2NvcGUuZm9ybSA9IHt9O1xuXG4gICRzY29wZS5zZW5kTWFpbCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGRhdGEgPSh7XG4gICAgICBjb250YWN0TmFtZSA6IHRoaXMuY29udGFjdE5hbWUsXG4gICAgICBjb250YWN0Q29tcGFueSA6IHRoaXMuY29udGFjdENvbXBhbnksXG4gICAgICBjb250YWN0RW1haWwgOiB0aGlzLmNvbnRhY3RFbWFpbCxcbiAgICAgIGNvbnRhY3RNZXNzYWdlIDogdGhpcy5jb250YWN0TWVzc2FnZVxuICAgIH0pO1xuXG4gICAgJGh0dHAucG9zdCgnL2NvbnRhY3QtZm9ybScsIGRhdGEpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyl7XG4gICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnVGhhbmsgeW91IGZvciB5b3VyIG1lc3NhZ2UgJyArIGRhdGEuY29udGFjdE5hbWUpO1xuICAgICAgICAgICAkc2NvcGUuZm9ybS5jb250YWN0Rm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgJHNjb3BlLmZvcm0uY29udGFjdEZvcm0uJHNldFVudG91Y2hlZCgpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyl7XG4gICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0LiBQbGVhc2UgdHJ5IGFnYWluJyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29udGFjdE5hbWUgPSBudWxsO1xuICAgICAgdGhpcy5jb250YWN0Q29tcGFueSA9IG51bGw7XG4gICAgICB0aGlzLmNvbnRhY3RFbWFpbCA9IG51bGw7XG4gICAgICB0aGlzLmNvbnRhY3RNZXNzYWdlID0gbnVsbDtcblxuICB9XG5cbiAgJHNjb3BlLmdldFVzZXIgPSBmdW5jdGlvbih1c2VybmFtZSl7XG5cdFx0VHdpdHRlclNlcnZpY2UuZ2V0VXNlcih1c2VybmFtZSlcblx0XHQgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0ICAgICAgICAkc2NvcGUudHdpdHRlckVycm9ycyA9IHVuZGVmaW5lZDtcblx0ICAgICAgICBcdCRzY29wZS50d2VldHMgPSBKU09OLnBhcnNlKGRhdGEucmVzdWx0LnVzZXJEYXRhKTtcblx0XHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCRzY29wZS50d2VldHMpO1xuXHRcdCAgICB9KVxuXHRcdCAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdCAgICAgICAgY29uc29sZS5lcnJvcigndGhlcmUgd2FzIGFuIGVycm9yIHJldHJpZXZpbmcgZGF0YTogJywgZXJyb3IpO1xuXHRcdCAgICAgICAgJHNjb3BlLnR3aXR0ZXJFcnJvcnMgPSBlcnJvci5lcnJvcjtcblx0XHQgICAgfSlcblx0fTtcblxuICAvLyRzY29wZS5nZXRVc2VyKCk7XG5cblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29udHJvbGxlcignbmF2Q3RybCcsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJywgJyRkb2N1bWVudCcsIGZ1bmN0aW9uKCRzY29wZSwgJGxvY2F0aW9uLCAkYW5jaG9yU2Nyb2xsLCAkZG9jdW1lbnQpe1xuICAkc2NvcGUubGlua1RvID0gZnVuY3Rpb24oaWQpe1xuXG4gICAgICB2YXIgcm91dGUgPSAkbG9jYXRpb24udXJsKCk7XG4gICAgICB2YXIgb2Zmc2V0ID0gNjA7XG4gICAgICB2YXIgZHVyYXRpb24gPSA4MDA7XG4gICAgICB2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChpZCk7XG5cbiAgICAgIGlmKHJvdXRlICE9PSAnLycpe1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdhbm90aGVyIHJvdXRlICsgJyArIHJvdXRlKTtcbiAgICAgICAgJGxvY2F0aW9uLnVybCgnLycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgJGRvY3VtZW50LnNjcm9sbFRvRWxlbWVudChlbGVtZW50LCBvZmZzZXQsIGR1cmF0aW9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NhbWUgcm91dGUnKTtcbiAgICAgICAgJGRvY3VtZW50LnNjcm9sbFRvRWxlbWVudChlbGVtZW50LCBvZmZzZXQsIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAvLyRsb2NhdGlvbi51cmwoaWQpO1xuICAgICAvLyRhbmNob3JTY3JvbGwoKTtcbiAgfTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ3dvcmtDdHJsJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuXG4gICRzY29wZS50ZW5kcmlsU2hvd24gPSBmYWxzZTtcbiAgJHNjb3BlLnRvZ2dsZVRlbmRyaWwgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUudGVuZHJpbFNob3duID0gISRzY29wZS50ZW5kcmlsU2hvd247XG4gIH07XG5cbiAgJHNjb3BlLmNyb3duU2hvdyA9IGZhbHNlO1xuICAkc2NvcGUudG9nZ2xlQ3Jvd24gPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuY3Jvd25TaG93ID0gISRzY29wZS5jcm93blNob3c7XG4gIH07XG5cbiAgJHNjb3BlLmJyb2FkU2hvdyA9IGZhbHNlO1xuICAkc2NvcGUudG9nZ2xlQnJvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuYnJvYWRTaG93ID0gISRzY29wZS5icm9hZFNob3c7XG4gIH07XG5cbiAgJHNjb3BlLmFkaWhvdyA9IGZhbHNlO1xuICAkc2NvcGUudG9nZ2xlQWRpID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLmFkaVNob3cgPSAhJHNjb3BlLmFkaVNob3c7XG4gIH07XG5cbn1dKTtcbiJdfQ==
