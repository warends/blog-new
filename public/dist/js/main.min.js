angular.module("willsBlog",["ngResource","ngAnimate","ngSanitize","ui.router","duScroll"]),angular.module("willsBlog").config(["$locationProvider","$stateProvider","$urlRouterProvider",function(e,t,o){o.otherwise("/"),e.html5Mode(!0),t.state("home",{url:"/",templateUrl:"/partials/main/main",controller:"mainCtrl"}).state("account",{url:"/account",templateUrl:"/partials/login/login",controller:"loginCtrl"}).state("signup",{url:"/signup",templateUrl:"/partials/login/signup",controller:"signupCtrl"}).state("posts",{url:"/posts",templateUrl:"/partials/blog/blog-list",controller:"blogListCtrl"}).state("profile",{url:"/profile",templateUrl:"/partials/admin/profile",controller:"profileCtrl",resolve:{routeRoleCheck:["mvAuth",function(e){return e.authorizeAutheticatedUserForRoute()}]}}).state("postDetail",{url:"/posts/:slug",templateUrl:"/partials/blog/post-detail",controller:"postDetailCtrl"}).state("newPost",{url:"/admin/new-post",templateUrl:"/partials/blog/new-post",controller:"newPostCtrl",resolve:{routeRoleCheck:["mvAuth",function(e){return e.authorizeCurrentUserForRoute("admin")}]}}).state("editPost",{url:"/admin/:slug/edit",templateUrl:"/partials/blog/edit-post",controller:"editPostCtrl",resolve:{routeRoleCheck:["mvAuth",function(e){return e.authorizeCurrentUserForRoute("admin")}]}}).state("users",{url:"/admin/users",templateUrl:"/partials/admin/users-list",controller:"userListCtrl",resolve:{routeRoleCheck:["mvAuth",function(e){return e.authorizeCurrentUserForRoute("admin")}]}})}]),angular.module("willsBlog").run(["$rootScope","$location","$anchorScroll",function(e,t,o){e.$on("$routeChangeError",function(e,o,n,r){"not authorized"===r&&t.path("/")}),e.$on("$stateChangeSuccess",function(e,t,o){window.scrollTo(0,0)})}]),angular.module("willsBlog").controller("profileCtrl",["$scope","mvAuth","identity","notifier",function(e,t,o,n){e.username=o.currentUser.username,e.fName=o.currentUser.firstName,e.lName=o.currentUser.lastName,e.update=function(){var o={username:e.username,firstName:e.fName,lastName:e.lName};e.password&&e.password.length>0&&(o.password=e.password),t.updateCurrentUser(o).then(function(){n.notify("Your information has been updated")},function(e){n.error(e)})}}]),angular.module("willsBlog").controller("userListCtrl",["$scope","mvUser",function(e,t){e.users=t.query()}]),angular.module("willsBlog").controller("blogListCtrl",["$scope","mvCachedPost","identity","$location","Meta",function(e,t,o,n,r){window.scrollTo(0,0),r.setTitle("Blog"),e.posts=t.query(),e.identity=o,e.sortOptions=[{value:"title",text:"Sort by Title"},{value:"published",text:"Published Date"}],e.sortOrder=e.sortOptions[0].value}]),angular.module("willsBlog").controller("editPostCtrl",["$scope","notifier","mvPost","$q","$location","$stateParams","$http",function(e,t,o,n,r,a,l){e.post=o.get({slug:a.slug}),e.post.data={_id:e.post._id,title:e.post.title,slug:e.post.slug,categories:e.post.categories,headerImage:e.post.headerImage,excerpt:e.post.excerpt,body:e.post.body,author:e.post.author},e.updatePost=function(){e.post.$update({slug:e.post.slug},function(){t.notify("Your post has been updated"),r.path("/blog")},function(e){t.error(e.data)})},e.deletePost=function(e){e.$delete(function(){t.notify("Deleted from server"),r.path("/blog")})}}]),angular.module("willsBlog").factory("mvCachedPost",["mvPost",function(e){var t;return{query:function(){return t||(t=e.query()),t}}}]),angular.module("willsBlog").factory("mvPost",["$resource",function(e){return e("/api/posts/:slug",{slug:"@slug"},{update:{method:"PUT"}},{stripTrailingSlashes:!1})}]),angular.module("willsBlog").controller("newPostCtrl",["$scope","notifier","mvPost","$location",function(e,t,o,n){e.post=new o,e.createNewPost=function(){e.post.$save(function(){t.notify("New Post Created"),n.path("/blog")})},e.cancel=function(){n.path("/blog")}}]),angular.module("willsBlog").controller("postDetailCtrl",["$scope","mvCachedPost","mvPost","$stateParams","Meta",function(e,t,o,n,r){window.scrollTo(0,0),e.post=o.get({slug:n.slug},function(){var t=e.post.title,o=e.post.excerpt;r.setTitle(t),r.setDesc(o)})}]),angular.module("willsBlog").directive("globalModal",function(){return{restrict:"E",scope:{show:"="},replace:!0,transclude:!0,link:function(e,t,o){e.dialogStyle={},o.width&&(e.dialogStyle.width=o.width),o.height&&(e.dialogStyle.height=o.height),e.hideModal=function(){e.show=!1}},templateUrl:"/partials/common/modal"}}),angular.module("willsBlog").value("Toastr",toastr),angular.module("willsBlog").factory("notifier",["Toastr",function(e){return{notify:function(t){e.success(t),console.log(t)},error:function(t){e.error(t),console.log(t)}}}]),angular.module("willsBlog").factory("Meta",function(){var e="Web Development, Denver, CO",t="I enjoy all things web development and am always actively learning the newest techniques and langauges. If you have a web design or development project, give me a shout, I would love to talk about it.";return{title:function(){return e},setTitle:function(t){e=t},description:function(){return t},setDesc:function(e){t=e}}}).controller("metaCtrl",["$scope","Meta",function(e,t){e.Meta=t,e.metaDesc=t}]),angular.module("willsBlog").factory("TwitterService",["$http","$q",function(e,t){var o=function(o){var n=t.defer();return e.post("/twitter/user",{username:o}).success(function(e){return n.resolve(e)}).error(function(e){return n.reject(e)}),n.promise};return{getUser:o}}]),angular.module("willsBlog").controller("carouselCtrl",["$scope",function(e){e.slides=[{name:"Mobile",svg:"mobile-svg",desc:"Is your website up to date with the most current mobile design trends? If not, you are loosing valuable business. Ensure that your customers can reach your business from anywhere and receive the best user experience. By building with responsive design in mind, your customers will get a pixel perfect look from mobile to tablet or desktop."},{name:"ECommerce",svg:"ecomm-svg",desc:"Do you have a new product you are looking to bring to market and need an e-commerce site or just looking for more modern feel to an existing site?  By utilizing robust ecommerce platforms, we can design and develop a site that will scale with your business and needs all in time to meet your busy deadlines. "},{name:"SEO",svg:"seo-svg",desc:"Having a modern design and user friendly website is great, but if customers can`t find your business, it wont matter much.  We design and develop every aspect of the website with search engine optimization in mind and so your customers can find you among the competition.  Also through research and analytics we can develop, plan and deploy the best SEO and marketing practices to increase conversions and retention."}],e.currentIndex=0,e.setCurrentSlideIndex=function(t){e.currentIndex=t},e.isCurrentSlideIndex=function(t){return e.currentIndex===t}}]).animation(".slide-animation",function(){return{addClass:function(e,t,o){"ng-hide"==t?TweenMax.to(e,.5,{left:-e.parent().width(),onComplete:o}):o()},removeClass:function(e,t,o){"ng-hide"==t?(e.removeClass("ng-hide"),TweenMax.set(e,{left:e.parent().width()}),TweenMax.to(e,.5,{left:0,onComplete:o})):o()}}}),angular.module("willsBlog").controller("mainCtrl",["$scope","$location","mvCachedPost","notifier","TwitterService","$http","Meta",function(e,t,o,n,r,a,l){l.setTitle("Home"),l.setDesc("I enjoy all things web development and am always actively learning the newest techniques and langauges. If you have a web design or development project, give me a shout, I would love to talk about it."),e.services=[{name:"Development",svg:"dev-logo",description:"Customized and reusable code using the most up to date HTML5, CSS3 and Javascript framworks. Options range from static sites, content managed sites, and ecommerce stores.",more:"Development Skills include HTML5, CSS, Javascript, Angular, Backbone, Node, Express, Boostrap and more."},{name:"Web Design",svg:"design-logo",description:"Creating an excellent user experience through clean, simple and thoroughly crafted design. Collaboration with clients during design process ensures a superb finished project.",more:"Services include wire frames, photoshop mockups, logo design, and company branding."},{name:"Support",svg:"sup-logo",description:"Support is readily available for clients when anything comes up along the development process. Also available are personal instruction on how to maintain or update your own site.",more:"Have a new product or feature you want to implement? Plans for continued support and maintenance are available."}],e.posts=o.query(),e.form={},e.sendMail=function(){var t={contactName:this.contactName,contactCompany:this.contactCompany,contactEmail:this.contactEmail,contactMessage:this.contactMessage};a.post("/contact-form",t).success(function(t,o,r,a){n.notify("Thank you for your message "+t.contactName),e.form.contactForm.$setPristine(),e.form.contactForm.$setUntouched()}).error(function(e,t,o,r){n.notify("There was an error processing your request. Please try again")}),this.contactName=null,this.contactCompany=null,this.contactEmail=null,this.contactMessage=null},e.getUser=function(t){r.getUser(t).then(function(t){e.twitterErrors=void 0,e.tweets=JSON.parse(t.result.userData)}).catch(function(t){console.error("there was an error retrieving data: ",t),e.twitterErrors=t.error})}}]),angular.module("willsBlog").controller("navCtrl",["$scope","$location","$document",function(e,t,o){e.scrollTop=function(){o.scrollTopAnimated(0)},e.linkTo=function(e){var n=t.url(),r=60,a=800,l=angular.element(e);"/"!==n?t.url("/",function(){o.scrollToElement(l,r,a)}):o.scrollToElement(l,r,a)}}]),angular.module("willsBlog").controller("workCtrl",["$scope",function(e){e.projects=[{name:"Tendril Inc.",link:"https://www.tendrilinc.com",clickFunc:toggleTendril=function(){this.modal=!this.modal},backgroundImg:"img/gallery/tendril.png",modal:!1,modalImg:"img/gallery/tendril-mockup.png",noLink:!1},{name:"Crown Offroad",link:"http://crownoffroad.com",clickFunc:toggleCrown=function(){this.modal=!this.modal},backgroundImg:"img/gallery/crown-offroad.jpg",modal:!1,modalImg:"img/gallery/crown-offroad-mockup.jpg",noLink:!1},{name:"Colorado Broadband Portal",link:"http://broadband.co.gov",clickFunc:e.toggleBroad=function(){this.modal=!this.modal},backgroundImg:"img/gallery/wires.jpg",modal:!1,modalImg:"img/gallery/broadband.jpg",noLink:!1},{name:"adidas adiPlayer",link:"",clickFunc:toggleAdi=function(){this.modal=!this.modal},backgroundImg:"img/gallery/adiplayer.jpg",modal:!1,modalImg:"img/gallery/adiplayer_mockup.jpg",noLink:!0}]}]),angular.module("willsBlog").factory("identity",["$window","mvUser",function(e,t){var o;return e.bootstrappedUserObject&&(o=new t,angular.extend(o,e.bootstrappedUserObject)),{currentUser:o,isAuthenticated:function(){return!!this.currentUser},isAuthorized:function(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}}}]),angular.module("willsBlog").controller("loginCtrl",["$scope","$http","identity","notifier","mvAuth","$location","Meta",function(e,t,o,n,r,a,l){window.scrollTo(0,0),l.setTitle("Account"),e.identity=o,e.signIn=function(t,o){r.authenticateUser(t,o).then(function(t){t?(n.notify("You have signed in"),a.url("/account"),e.actShown=!1):n.notify("Username/Password Incorrect")})},e.signOut=function(){r.logoutUser().then(function(){e.username="",e.password="",n.notify("You have logged out"),a.path("/")})},e.signup=function(){var t={username:e.username,firstName:e.fName,lastName:e.lName,password:e.password};r.createUser(t).then(function(){n.notify("User account created"),a.path("/")},function(e){n.error(e)})},e.cancel=function(){a.path("/")},e.actShown=!1,e.toggleAccount=function(){o.isAuthenticated()?a.path("/account"):e.actShown=!e.actShown},e.signupShown=!1,e.toggleSignup=function(){e.signupShown=!e.signupShown}}]),angular.module("willsBlog").factory("mvAuth",["$http","identity","$q","mvUser",function(e,t,o,n){return{authenticateUser:function(r,a){var l=o.defer();return e.post("/login",{username:r,password:a}).then(function(e){if(e.data.success){var o=new n;angular.extend(o,e.data.user),t.currentUser=o,l.resolve(!0)}else l.resolve(!1)}),l.promise},logoutUser:function(){var n=o.defer();return e.post("/logout",{logout:!0}).then(function(){t.currentUser=void 0,n.resolve()}),n.promise},authorizeCurrentUserForRoute:function(e){return!!t.isAuthorized("admin")||o.reject("not authorized")},authorizeAutheticatedUserForRoute:function(){return!!t.isAuthenticated()||o.reject("not a current user")},createUser:function(e){var r=new n(e),a=o.defer();return r.$save().then(function(){t.currentUser=r,a.resolve()},function(e){a.reject(e.data.reason)}),a.promise},updateCurrentUser:function(e){var n=o.defer(),r=angular.copy(t.currentUser);return angular.extend(r,e),r.$update().then(function(){t.currentUser=r,n.resolve()},function(e){n.reject(e.data.reason)}),n.promise}}}]),angular.module("willsBlog").factory("mvUser",["$resource",function(e){var t=e("/api/users/:id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return t.prototype.isAdmin=function(){return this.roles&&this.roles.indexOf("admin")>-1},t}]),angular.module("willsBlog").controller("signupCtrl",["$scope","mvAuth","notifier","$location",function(e,t,o,n){e.signup=function(){var r={username:e.username,firstName:e.fName,lastName:e.lName,password:e.password};t.createUser(r).then(function(){o.notify("User account created"),n.path("/")},function(e){o.error(e)})},e.cancel=function(){n.path("/")}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFkbWluL3Byb2ZpbGVDdHJsLmpzIiwiYWRtaW4vdXNlckxpc3RDdHJsLmpzIiwiYmxvZy9ibG9nTGlzdEN0cmwuanMiLCJibG9nL2VkaXRQb3N0Q3RybC5qcyIsImJsb2cvbXZDYWNoZWRQb3N0LmpzIiwiYmxvZy9tdlBvc3QuanMiLCJibG9nL25ld1Bvc3RDdHJsLmpzIiwiYmxvZy9wb3N0RGV0YWlsQ3RybC5qcyIsImNvbW1vbi9tb2RhbERpci5qcyIsImNvbW1vbi9ub3RpZmllci5qcyIsImNvbW1vbi9wYWdlLmpzIiwiY29tbW9uL3R3aXR0ZXIuanMiLCJtYWluL2Nhcm91c2VsQ3RybC5qcyIsIm1haW4vbWFpbkN0cmwuanMiLCJtYWluL25hdkN0cmwuanMiLCJtYWluL3dvcmtDdHJsLmpzIiwibG9naW4vaWRlbnRpdHkuanMiLCJsb2dpbi9sb2dpbkN0cmwuanMiLCJsb2dpbi9tdkF1dGguanMiLCJsb2dpbi9tdlVzZXIuanMiLCJsb2dpbi9zaWdudXBDdHJsLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwiaHRtbDVNb2RlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJyZXNvbHZlIiwicm91dGVSb2xlQ2hlY2siLCJtdkF1dGgiLCJhdXRob3JpemVBdXRoZXRpY2F0ZWRVc2VyRm9yUm91dGUiLCJhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlIiwicnVuIiwiJHJvb3RTY29wZSIsIiRsb2NhdGlvbiIsIiRhbmNob3JTY3JvbGwiLCIkb24iLCJldnQiLCJjdXJyZW50IiwicHJldmlvdXMiLCJyZWplY3Rpb24iLCJwYXRoIiwiZXZlbnQiLCJjdXJyZW50Um91dGUiLCJwcmV2aW91c1JvdXRlIiwid2luZG93Iiwic2Nyb2xsVG8iLCIkc2NvcGUiLCJpZGVudGl0eSIsIm5vdGlmaWVyIiwidXNlcm5hbWUiLCJjdXJyZW50VXNlciIsImZOYW1lIiwiZmlyc3ROYW1lIiwibE5hbWUiLCJsYXN0TmFtZSIsInVwZGF0ZSIsIm5ld1VzZXJEYXRhIiwicGFzc3dvcmQiLCJsZW5ndGgiLCJ1cGRhdGVDdXJyZW50VXNlciIsInRoZW4iLCJub3RpZnkiLCJyZWFzb24iLCJlcnJvciIsIm12VXNlciIsInVzZXJzIiwicXVlcnkiLCJtdkNhY2hlZFBvc3QiLCJNZXRhIiwic2V0VGl0bGUiLCJwb3N0cyIsInNvcnRPcHRpb25zIiwidmFsdWUiLCJ0ZXh0Iiwic29ydE9yZGVyIiwibXZQb3N0IiwiJHEiLCIkc3RhdGVQYXJhbXMiLCIkaHR0cCIsInBvc3QiLCJnZXQiLCJzbHVnIiwiZGF0YSIsIl9pZCIsInRpdGxlIiwiY2F0ZWdvcmllcyIsImhlYWRlckltYWdlIiwiZXhjZXJwdCIsImJvZHkiLCJhdXRob3IiLCJ1cGRhdGVQb3N0IiwiJHVwZGF0ZSIsImRlbGV0ZVBvc3QiLCIkZGVsZXRlIiwiZmFjdG9yeSIsInBvc3RMaXN0IiwiJHJlc291cmNlIiwibWV0aG9kIiwic3RyaXBUcmFpbGluZ1NsYXNoZXMiLCJjcmVhdGVOZXdQb3N0IiwiJHNhdmUiLCJjYW5jZWwiLCJkZXNjIiwic2V0RGVzYyIsImRpcmVjdGl2ZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJzaG93IiwicmVwbGFjZSIsInRyYW5zY2x1ZGUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJzIiwiZGlhbG9nU3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImhpZGVNb2RhbCIsInRvYXN0ciIsIlRvYXN0ciIsIm1lc3NhZ2UiLCJzdWNjZXNzIiwiY29uc29sZSIsImxvZyIsIm5ld1RpdGxlIiwiZGVzY3JpcHRpb24iLCJuZXdEZXNjIiwibWV0YURlc2MiLCJnZXRVc2VyIiwiZCIsImRlZmVyIiwicmVqZWN0IiwicHJvbWlzZSIsInNsaWRlcyIsIm5hbWUiLCJzdmciLCJjdXJyZW50SW5kZXgiLCJzZXRDdXJyZW50U2xpZGVJbmRleCIsImluZGV4IiwiaXNDdXJyZW50U2xpZGVJbmRleCIsImFuaW1hdGlvbiIsImFkZENsYXNzIiwiY2xhc3NOYW1lIiwiZG9uZSIsIlR3ZWVuTWF4IiwidG8iLCJsZWZ0IiwicGFyZW50Iiwib25Db21wbGV0ZSIsInJlbW92ZUNsYXNzIiwic2V0IiwiVHdpdHRlclNlcnZpY2UiLCJzZXJ2aWNlcyIsIm1vcmUiLCJmb3JtIiwic2VuZE1haWwiLCJjb250YWN0TmFtZSIsInRoaXMiLCJjb250YWN0Q29tcGFueSIsImNvbnRhY3RFbWFpbCIsImNvbnRhY3RNZXNzYWdlIiwic3RhdHVzIiwiaGVhZGVycyIsImNvbnRhY3RGb3JtIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsInR3aXR0ZXJFcnJvcnMiLCJ1bmRlZmluZWQiLCJ0d2VldHMiLCJKU09OIiwicGFyc2UiLCJyZXN1bHQiLCJ1c2VyRGF0YSIsImNhdGNoIiwiJGRvY3VtZW50Iiwic2Nyb2xsVG9wIiwic2Nyb2xsVG9wQW5pbWF0ZWQiLCJsaW5rVG8iLCJpZCIsInJvdXRlIiwib2Zmc2V0IiwiZHVyYXRpb24iLCJzY3JvbGxUb0VsZW1lbnQiLCJwcm9qZWN0cyIsImNsaWNrRnVuYyIsInRvZ2dsZVRlbmRyaWwiLCJtb2RhbCIsImJhY2tncm91bmRJbWciLCJtb2RhbEltZyIsIm5vTGluayIsInRvZ2dsZUNyb3duIiwidG9nZ2xlQnJvYWQiLCJ0b2dnbGVBZGkiLCIkd2luZG93IiwiYm9vdHN0cmFwcGVkVXNlck9iamVjdCIsImV4dGVuZCIsImlzQXV0aGVudGljYXRlZCIsImlzQXV0aG9yaXplZCIsInJvbGUiLCJyb2xlcyIsImluZGV4T2YiLCJzaWduSW4iLCJhdXRoZW50aWNhdGVVc2VyIiwiYWN0U2hvd24iLCJzaWduT3V0IiwibG9nb3V0VXNlciIsInNpZ251cCIsImNyZWF0ZVVzZXIiLCJ0b2dnbGVBY2NvdW50Iiwic2lnbnVwU2hvd24iLCJ0b2dnbGVTaWdudXAiLCJkZWZlcnJlZCIsInJlc3BvbnNlIiwidXNlciIsImxvZ291dCIsIm5ld1VzZXIiLCJjbG9uZSIsImNvcHkiLCJVc2VyUmVzb3VyY2UiLCJpc0FycmF5IiwicHJvdG90eXBlIiwiaXNBZG1pbiJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsYUFBQSxhQUFBLFlBQUEsYUFBQSxZQUFBLGFBRUFELFFBQUFDLE9BQUEsYUFBQUMsUUFBQSxvQkFBQSxpQkFBQSxxQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQVdBQSxFQUFBQyxVQUFBLEtBRUFILEVBQUFJLFdBQUEsR0FFQUgsRUFDQUksTUFBQSxRQUNBQyxJQUFBLElBQ0FDLFlBQUEsc0JBQ0FDLFdBQUEsYUFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FDLFlBQUEsd0JBQ0FDLFdBQUEsY0FFQUgsTUFBQSxVQUNBQyxJQUFBLFVBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsZUFFQUgsTUFBQSxTQUNBQyxJQUFBLFNBQ0FDLFlBQUEsMkJBQ0FDLFdBQUEsaUJBRUFILE1BQUEsV0FDQUMsSUFBQSxXQUNBQyxZQUFBLDBCQUNBQyxXQUFBLGNBQ0FDLFNBQ0FDLGdCQUFBLFNBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyx5Q0FJQVAsTUFBQSxjQUNBQyxJQUFBLGVBQ0FDLFlBQUEsNkJBQ0FDLFdBQUEsbUJBRUFILE1BQUEsV0FDQUMsSUFBQSxrQkFDQUMsWUFBQSwwQkFDQUMsV0FBQSxjQUNBQyxTQUNBQyxnQkFBQSxTQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUUsNkJBQUEsY0FJQVIsTUFBQSxZQUNBQyxJQUFBLG9CQUNBQyxZQUFBLDJCQUNBQyxXQUFBLGVBQ0FDLFNBQ0FDLGdCQUFBLFNBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBRSw2QkFBQSxjQUlBUixNQUFBLFNBQ0FDLElBQUEsZUFDQUMsWUFBQSw2QkFDQUMsV0FBQSxlQUNBQyxTQUNBQyxnQkFBQSxTQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUUsNkJBQUEsaUJBUUFoQixRQUFBQyxPQUFBLGFBQUFnQixLQUFBLGFBQUEsWUFBQSxnQkFB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TyxNQUNBSSxTQUFBWCxFQUFBVyxTQUVBN0IsR0FBQWtMLFdBQUF0SixHQUNBSSxLQUFBLFdBQ0FaLEVBQUFhLE9BQUEsd0JBQ0E1QixFQUFBTyxLQUFBLE1BQ0EsU0FBQXNCLEdBQ0FkLEVBQUFlLE1BQUFELE1BS0FoQixFQUFBdUQsT0FBQSxXQUNBcEUsRUFBQU8sS0FBQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnLCBbJ25nUmVzb3VyY2UnLCAnbmdBbmltYXRlJywgJ25nU2FuaXRpemUnLCAndWkucm91dGVyJywgJ2R1U2Nyb2xsJ10pO1xuXG5hbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCAnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIsICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpe1xuXG4gICAgdmFyIHJvdXRlUm9sZUNoZWNrcyA9IHtcbiAgICAgIGFkbWluOiBmdW5jdGlvbihtdkF1dGgpe1xuICAgICAgICAgIHJldHVybiBtdkF1dGguYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSgnYWRtaW4nKTtcbiAgICAgIH0sXG4gICAgICB1c2VyOiBmdW5jdGlvbihtdkF1dGgpe1xuICAgICAgICAgIHJldHVybiBtdkF1dGguYXV0aG9yaXplQXV0aGV0aWNhdGVkVXNlckZvclJvdXRlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICB1cmw6ICcvJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL21haW4vbWFpbicsXG4gICAgICBjb250cm9sbGVyOiAnbWFpbkN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ2FjY291bnQnLCB7XG4gICAgICB1cmw6ICcvYWNjb3VudCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9sb2dpbi9sb2dpbicsXG4gICAgICBjb250cm9sbGVyOiAnbG9naW5DdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdzaWdudXAnLCB7XG4gICAgICB1cmw6ICcvc2lnbnVwJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2xvZ2luL3NpZ251cCcsXG4gICAgICBjb250cm9sbGVyOiAnc2lnbnVwQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgncG9zdHMnLCB7XG4gICAgICB1cmw6ICcvcG9zdHMnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvYmxvZy9ibG9nLWxpc3QnLFxuICAgICAgY29udHJvbGxlcjogJ2Jsb2dMaXN0Q3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcbiAgICAgIHVybDogJy9wcm9maWxlJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2FkbWluL3Byb2ZpbGUnLFxuICAgICAgY29udHJvbGxlcjogJ3Byb2ZpbGVDdHJsJyxcbiAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgcm91dGVSb2xlQ2hlY2s6IFsnbXZBdXRoJywgZnVuY3Rpb24obXZBdXRoKXtcbiAgICAgICAgICAgIHJldHVybiBtdkF1dGguYXV0aG9yaXplQXV0aGV0aWNhdGVkVXNlckZvclJvdXRlKCk7XG4gICAgICAgIH1cbiAgICAgIF19XG4gICAgfSlcbiAgICAuc3RhdGUoJ3Bvc3REZXRhaWwnLCB7IC8vdmlldyBzaW5nbGUgcG9zdFxuICAgICAgdXJsOiAnL3Bvc3RzLzpzbHVnJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Jsb2cvcG9zdC1kZXRhaWwnLFxuICAgICAgY29udHJvbGxlcjogJ3Bvc3REZXRhaWxDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCduZXdQb3N0JywgeyAgLy9hZGRpbmcgYSBuZXcgcG9zdFxuICAgICAgdXJsOiAnL2FkbWluL25ldy1wb3N0JyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Jsb2cvbmV3LXBvc3QnLFxuICAgICAgY29udHJvbGxlcjogJ25ld1Bvc3RDdHJsJyxcbiAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgcm91dGVSb2xlQ2hlY2s6IFsnbXZBdXRoJywgZnVuY3Rpb24obXZBdXRoKXtcbiAgICAgICAgICAgIHJldHVybiBtdkF1dGguYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSgnYWRtaW4nKTtcbiAgICAgICAgfVxuICAgICAgXX1cbiAgICB9KVxuICAgIC5zdGF0ZSgnZWRpdFBvc3QnLCB7ICAvL2VkaXQgcG9zdFxuICAgICAgdXJsOiAnL2FkbWluLzpzbHVnL2VkaXQnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvYmxvZy9lZGl0LXBvc3QnLFxuICAgICAgY29udHJvbGxlcjogJ2VkaXRQb3N0Q3RybCcsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIHJvdXRlUm9sZUNoZWNrOiBbJ212QXV0aCcsIGZ1bmN0aW9uKG12QXV0aCl7XG4gICAgICAgICAgICByZXR1cm4gbXZBdXRoLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7XG4gICAgICAgIH1cbiAgICAgIF19XG4gICAgfSlcbiAgICAuc3RhdGUoJ3VzZXJzJywge1xuICAgICAgdXJsOiAnL2FkbWluL3VzZXJzJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2FkbWluL3VzZXJzLWxpc3QnLFxuICAgICAgY29udHJvbGxlcjogJ3VzZXJMaXN0Q3RybCcsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIHJvdXRlUm9sZUNoZWNrOiBbJ212QXV0aCcsIGZ1bmN0aW9uKG12QXV0aCl7XG4gICAgICAgICAgICByZXR1cm4gbXZBdXRoLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7XG4gICAgICAgIH1cbiAgICAgIF19XG4gICAgfSk7XG5cbn1dKTsvL2VuZCBjb25maWdcblxuXG5hbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykucnVuKFsnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAnJGFuY2hvclNjcm9sbCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRsb2NhdGlvbiwgJGFuY2hvclNjcm9sbCl7XG5cbiAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24oZXZ0LCBjdXJyZW50LCBwcmV2aW91cywgcmVqZWN0aW9uKSB7XG4gICAgICBpZihyZWplY3Rpb24gPT09ICdub3QgYXV0aG9yaXplZCcpIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICAgIH1cbiAgfSk7XG5cbiAgJHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsIGZ1bmN0aW9uIChldmVudCwgY3VycmVudFJvdXRlLCBwcmV2aW91c1JvdXRlKSB7XG4gICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICB9KTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ3Byb2ZpbGVDdHJsJywgWyckc2NvcGUnLCAnbXZBdXRoJywgJ2lkZW50aXR5JywgJ25vdGlmaWVyJywgZnVuY3Rpb24oJHNjb3BlLCBtdkF1dGgsIGlkZW50aXR5LCBub3RpZmllcil7XG4gICRzY29wZS51c2VybmFtZSA9IGlkZW50aXR5LmN1cnJlbnRVc2VyLnVzZXJuYW1lO1xuICAkc2NvcGUuZk5hbWUgPSBpZGVudGl0eS5jdXJyZW50VXNlci5maXJzdE5hbWU7XG4gICRzY29wZS5sTmFtZSA9IGlkZW50aXR5LmN1cnJlbnRVc2VyLmxhc3ROYW1lO1xuXG4gICRzY29wZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIG5ld1VzZXJEYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJHNjb3BlLnVzZXJuYW1lLFxuICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS5mTmFtZSxcbiAgICAgICAgbGFzdE5hbWU6ICRzY29wZS5sTmFtZVxuICAgICAgfVxuXG4gICAgICBpZigkc2NvcGUucGFzc3dvcmQgJiYgJHNjb3BlLnBhc3N3b3JkLmxlbmd0aCA+IDApIHtcbiAgICAgICBuZXdVc2VyRGF0YS5wYXNzd29yZCA9ICRzY29wZS5wYXNzd29yZDtcbiAgICAgIH1cblxuICAgICAgbXZBdXRoLnVwZGF0ZUN1cnJlbnRVc2VyKG5ld1VzZXJEYXRhKVxuICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnWW91ciBpbmZvcm1hdGlvbiBoYXMgYmVlbiB1cGRhdGVkJyk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgICAgbm90aWZpZXIuZXJyb3IocmVhc29uKTtcbiAgICAgICAgfSk7XG4gIH1cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ3VzZXJMaXN0Q3RybCcsIFsnJHNjb3BlJywgJ212VXNlcicsIGZ1bmN0aW9uKCRzY29wZSwgbXZVc2VyKXtcbiAgJHNjb3BlLnVzZXJzID0gbXZVc2VyLnF1ZXJ5KCk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29udHJvbGxlcignYmxvZ0xpc3RDdHJsJywgWyckc2NvcGUnLCAnbXZDYWNoZWRQb3N0JywgJ2lkZW50aXR5JywgJyRsb2NhdGlvbicsICdNZXRhJywgIGZ1bmN0aW9uKCRzY29wZSwgbXZDYWNoZWRQb3N0LCBpZGVudGl0eSwgJGxvY2F0aW9uLCBNZXRhKXtcblxuICB3aW5kb3cuc2Nyb2xsVG8oMCwwKTtcblxuICBNZXRhLnNldFRpdGxlKCdCbG9nJyk7XG5cbiAgJHNjb3BlLnBvc3RzID0gbXZDYWNoZWRQb3N0LnF1ZXJ5KCk7XG5cbiAgJHNjb3BlLmlkZW50aXR5ID0gaWRlbnRpdHk7XG5cbiAgJHNjb3BlLnNvcnRPcHRpb25zPSBbXG4gICAge3ZhbHVlOiAndGl0bGUnLCB0ZXh0OiAnU29ydCBieSBUaXRsZSd9LFxuICAgIHt2YWx1ZTogJ3B1Ymxpc2hlZCcsIHRleHQ6ICdQdWJsaXNoZWQgRGF0ZSd9XTtcblxuICAkc2NvcGUuc29ydE9yZGVyID0gJHNjb3BlLnNvcnRPcHRpb25zWzBdLnZhbHVlO1xufV0pO1xuIiwiIGFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5jb250cm9sbGVyKCdlZGl0UG9zdEN0cmwnLCBbJyRzY29wZScsICdub3RpZmllcicsICdtdlBvc3QnLCAnJHEnLCAnJGxvY2F0aW9uJywgJyRzdGF0ZVBhcmFtcycsICckaHR0cCcsIGZ1bmN0aW9uKCRzY29wZSwgbm90aWZpZXIsIG12UG9zdCwgJHEsICRsb2NhdGlvbiwgJHN0YXRlUGFyYW1zLCAkaHR0cCl7XG5cbiAgICAkc2NvcGUucG9zdCA9IG12UG9zdC5nZXQoeyBzbHVnOiAkc3RhdGVQYXJhbXMuc2x1ZyB9KTtcblxuICAgICRzY29wZS5wb3N0LmRhdGEgPSB7XG4gICAgICAgIF9pZDogJHNjb3BlLnBvc3QuX2lkLFxuICAgICAgICB0aXRsZSA6ICRzY29wZS5wb3N0LnRpdGxlLFxuICAgICAgICBzbHVnOiAkc2NvcGUucG9zdC5zbHVnLFxuICAgICAgICBjYXRlZ29yaWVzIDogJHNjb3BlLnBvc3QuY2F0ZWdvcmllcyxcbiAgICAgICAgaGVhZGVySW1hZ2UgOiAkc2NvcGUucG9zdC5oZWFkZXJJbWFnZSxcbiAgICAgICAgZXhjZXJwdCA6ICRzY29wZS5wb3N0LmV4Y2VycHQsXG4gICAgICAgIGJvZHkgOiAkc2NvcGUucG9zdC5ib2R5LFxuICAgICAgICBhdXRob3I6ICRzY29wZS5wb3N0LmF1dGhvclxuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVQb3N0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLnBvc3QuJHVwZGF0ZSggeyBzbHVnOiAkc2NvcGUucG9zdC5zbHVnIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgbm90aWZpZXIubm90aWZ5KCdZb3VyIHBvc3QgaGFzIGJlZW4gdXBkYXRlZCcpO1xuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYmxvZycpO1xuICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAgIG5vdGlmaWVyLmVycm9yKHJlYXNvbi5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmRlbGV0ZVBvc3QgPSBmdW5jdGlvbihwb3N0KXtcbiAgICAgIHBvc3QuJGRlbGV0ZShmdW5jdGlvbigpIHtcbiAgICAgICAgbm90aWZpZXIubm90aWZ5KCdEZWxldGVkIGZyb20gc2VydmVyJyk7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYmxvZycpO1xuICAgICAgfSk7XG4gICAgfVxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuZmFjdG9yeSgnbXZDYWNoZWRQb3N0JywgWydtdlBvc3QnLCBmdW5jdGlvbihtdlBvc3Qpe1xuICB2YXIgcG9zdExpc3Q7XG5cbiAgcmV0dXJuIHtcbiAgICBxdWVyeTogZnVuY3Rpb24oKXtcbiAgICAgIGlmKCFwb3N0TGlzdCl7XG4gICAgICAgIHBvc3RMaXN0ID0gbXZQb3N0LnF1ZXJ5KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwb3N0TGlzdDtcbiAgICB9XG4gIH1cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmZhY3RvcnkoJ212UG9zdCcsIFsnJHJlc291cmNlJywgZnVuY3Rpb24oJHJlc291cmNlKXtcblxuICByZXR1cm4gJHJlc291cmNlKCcvYXBpL3Bvc3RzLzpzbHVnJywge3NsdWc6ICdAc2x1Zyd9LCB7XG4gICAgdXBkYXRlIDoge1xuICAgICAgbWV0aG9kOiAnUFVUJ1xuICAgIH1cbiAgfSwge1xuICAgIHN0cmlwVHJhaWxpbmdTbGFzaGVzOiBmYWxzZVxuICB9KTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ25ld1Bvc3RDdHJsJywgWyckc2NvcGUnLCAnbm90aWZpZXInLCAnbXZQb3N0JywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCRzY29wZSwgbm90aWZpZXIsIG12UG9zdCwgJGxvY2F0aW9uKXtcblxuICAkc2NvcGUucG9zdCA9IG5ldyBtdlBvc3QoKTtcblxuICAkc2NvcGUuY3JlYXRlTmV3UG9zdCA9IGZ1bmN0aW9uKCl7XG4gICAgJHNjb3BlLnBvc3QuJHNhdmUoZnVuY3Rpb24oKXtcbiAgICAgICAgbm90aWZpZXIubm90aWZ5KCdOZXcgUG9zdCBDcmVhdGVkJyk7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYmxvZycpO1xuICAgIH0pO1xuICB9XG4gICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpe1xuICAgICRsb2NhdGlvbi5wYXRoKCcvYmxvZycpO1xuICB9XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5jb250cm9sbGVyKCdwb3N0RGV0YWlsQ3RybCcsIFsnJHNjb3BlJywgJ212Q2FjaGVkUG9zdCcsICdtdlBvc3QnLCAnJHN0YXRlUGFyYW1zJywgJ01ldGEnLCAgZnVuY3Rpb24oJHNjb3BlLCBtdkNhY2hlZFBvc3QsIG12UG9zdCwgJHN0YXRlUGFyYW1zLCBNZXRhKXtcblxuICB3aW5kb3cuc2Nyb2xsVG8oMCwwKTtcblxuICAvLyBtdkNhY2hlZFBvc3QucXVlcnkoKS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGNvbGxlY3Rpb24pe1xuICAvLyAgIGNvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbihwb3N0KXtcbiAgLy8gICAgIGlmKHBvc3QuX2lkID09PSAkc3RhdGVQYXJhbXMuaWQpe1xuICAvLyAgICAgICAkc2NvcGUucG9zdCA9IHBvc3Q7XG4gIC8vICAgICB9XG4gIC8vICAgfSk7XG4gIC8vIH0pO1xuXG4gICAkc2NvcGUucG9zdCA9IG12UG9zdC5nZXQoeyBzbHVnOiAkc3RhdGVQYXJhbXMuc2x1ZyB9LCBmdW5jdGlvbigpe1xuICAgICB2YXIgdGl0bGUgPSAkc2NvcGUucG9zdC50aXRsZTtcbiAgICAgdmFyIGRlc2MgPSAkc2NvcGUucG9zdC5leGNlcnB0O1xuICAgICBNZXRhLnNldFRpdGxlKHRpdGxlKTtcbiAgICAgTWV0YS5zZXREZXNjKGRlc2MpO1xuICAgfSk7XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5kaXJlY3RpdmUoJ2dsb2JhbE1vZGFsJywgZnVuY3Rpb24oKXtcbiAgcmV0dXJue1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgc2NvcGU6IHtcbiAgICAgIHNob3c6ICc9J1xuICAgIH0sXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xuICAgICAgc2NvcGUuZGlhbG9nU3R5bGUgPSB7fTtcbiAgICAgIGlmKGF0dHJzLndpZHRoKVxuICAgICAgICBzY29wZS5kaWFsb2dTdHlsZS53aWR0aCA9IGF0dHJzLndpZHRoO1xuICAgICAgaWYgKGF0dHJzLmhlaWdodClcbiAgICAgICAgc2NvcGUuZGlhbG9nU3R5bGUuaGVpZ2h0ID0gYXR0cnMuaGVpZ2h0O1xuXG4gICAgICBzY29wZS5oaWRlTW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgICBzY29wZS5zaG93ID0gZmFsc2U7XG4gICAgICB9O1xuICAgIH0sXG4gICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvY29tbW9uL21vZGFsJ1xuICB9XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS52YWx1ZSgnVG9hc3RyJywgdG9hc3RyKTtcblxuYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmZhY3RvcnkoJ25vdGlmaWVyJywgWydUb2FzdHInLCBmdW5jdGlvbihUb2FzdHIpe1xuICByZXR1cm4ge1xuICAgIG5vdGlmeTogZnVuY3Rpb24obWVzc2FnZSl7XG4gICAgICBUb2FzdHIuc3VjY2VzcyhtZXNzYWdlKTtcbiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgIH0sXG4gICAgZXJyb3I6IGZ1bmN0aW9uKG1lc3NhZ2Upe1xuICAgICAgVG9hc3RyLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgfVxuICB9XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuZmFjdG9yeSgnTWV0YScsIGZ1bmN0aW9uKCl7XG4gIHZhciB0aXRsZSA9ICdXZWIgRGV2ZWxvcG1lbnQsIERlbnZlciwgQ08nO1xuICB2YXIgZGVzYyA9ICdJIGVuam95IGFsbCB0aGluZ3Mgd2ViIGRldmVsb3BtZW50IGFuZCBhbSBhbHdheXMgYWN0aXZlbHkgbGVhcm5pbmcgdGhlIG5ld2VzdCB0ZWNobmlxdWVzIGFuZCBsYW5nYXVnZXMuIElmIHlvdSBoYXZlIGEgd2ViIGRlc2lnbiBvciBkZXZlbG9wbWVudCBwcm9qZWN0LCBnaXZlIG1lIGEgc2hvdXQsIEkgd291bGQgbG92ZSB0byB0YWxrIGFib3V0IGl0Lic7XG4gIHJldHVybiB7XG4gICAgdGl0bGU6IGZ1bmN0aW9uKCkge3JldHVybiB0aXRsZTt9LFxuICAgIHNldFRpdGxlOiBmdW5jdGlvbihuZXdUaXRsZSkgeyB0aXRsZSA9IG5ld1RpdGxlIH0sXG4gICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVzYzt9LFxuICAgIHNldERlc2MgOiBmdW5jdGlvbihuZXdEZXNjKSB7IGRlc2MgPSBuZXdEZXNjfVxuICB9XG59KVxuLmNvbnRyb2xsZXIoJ21ldGFDdHJsJywgWyckc2NvcGUnLCAnTWV0YScsIGZ1bmN0aW9uKCRzY29wZSwgTWV0YSl7XG4gICRzY29wZS5NZXRhID0gTWV0YTtcbiAgJHNjb3BlLm1ldGFEZXNjID0gTWV0YTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5mYWN0b3J5KCdUd2l0dGVyU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbigkaHR0cCwgJHEpe1xuXG4gIHZhciBnZXRVc2VyID0gZnVuY3Rpb24odXNlcm5hbWUpe1xuICAgIHZhciBkID0gJHEuZGVmZXIoKTtcblxuICAgICRodHRwLnBvc3QoJy90d2l0dGVyL3VzZXInLCB7dXNlcm5hbWUgOiB1c2VybmFtZX0pXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgcmV0dXJuIGQucmVzb2x2ZShkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICByZXR1cm4gZC5yZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZC5wcm9taXNlO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgZ2V0VXNlciA6IGdldFVzZXJcbiAgICB9XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29udHJvbGxlcignY2Fyb3VzZWxDdHJsJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAkc2NvcGUuc2xpZGVzID0gW1xuICAgIHsgbmFtZTogJ01vYmlsZScsXG4gICAgc3ZnOiAnbW9iaWxlLXN2ZycsXG4gICAgZGVzYzogJ0lzIHlvdXIgd2Vic2l0ZSB1cCB0byBkYXRlIHdpdGggdGhlIG1vc3QgY3VycmVudCBtb2JpbGUgZGVzaWduIHRyZW5kcz8gSWYgbm90LCB5b3UgYXJlIGxvb3NpbmcgdmFsdWFibGUgYnVzaW5lc3MuIEVuc3VyZSB0aGF0IHlvdXIgY3VzdG9tZXJzIGNhbiByZWFjaCB5b3VyIGJ1c2luZXNzIGZyb20gYW55d2hlcmUgYW5kIHJlY2VpdmUgdGhlIGJlc3QgdXNlciBleHBlcmllbmNlLiBCeSBidWlsZGluZyB3aXRoIHJlc3BvbnNpdmUgZGVzaWduIGluIG1pbmQsIHlvdXIgY3VzdG9tZXJzIHdpbGwgZ2V0IGEgcGl4ZWwgcGVyZmVjdCBsb29rIGZyb20gbW9iaWxlIHRvIHRhYmxldCBvciBkZXNrdG9wLicgfSxcblxuICAgIHsgbmFtZTogJ0VDb21tZXJjZScsXG4gICAgc3ZnOiAnZWNvbW0tc3ZnJyxcbiAgICBkZXNjOiAnRG8geW91IGhhdmUgYSBuZXcgcHJvZHVjdCB5b3UgYXJlIGxvb2tpbmcgdG8gYnJpbmcgdG8gbWFya2V0IGFuZCBuZWVkIGFuIGUtY29tbWVyY2Ugc2l0ZSBvciBqdXN0IGxvb2tpbmcgZm9yIG1vcmUgbW9kZXJuIGZlZWwgdG8gYW4gZXhpc3Rpbmcgc2l0ZT8gIEJ5IHV0aWxpemluZyByb2J1c3QgZWNvbW1lcmNlIHBsYXRmb3Jtcywgd2UgY2FuIGRlc2lnbiBhbmQgZGV2ZWxvcCBhIHNpdGUgdGhhdCB3aWxsIHNjYWxlIHdpdGggeW91ciBidXNpbmVzcyBhbmQgbmVlZHMgYWxsIGluIHRpbWUgdG8gbWVldCB5b3VyIGJ1c3kgZGVhZGxpbmVzLiAnIH0sXG5cbiAgICB7IG5hbWU6ICdTRU8nLFxuICAgIHN2ZzogJ3Nlby1zdmcnLFxuICAgIGRlc2M6ICdIYXZpbmcgYSBtb2Rlcm4gZGVzaWduIGFuZCB1c2VyIGZyaWVuZGx5IHdlYnNpdGUgaXMgZ3JlYXQsIGJ1dCBpZiBjdXN0b21lcnMgY2FuYHQgZmluZCB5b3VyIGJ1c2luZXNzLCBpdCB3b250IG1hdHRlciBtdWNoLiAgV2UgZGVzaWduIGFuZCBkZXZlbG9wIGV2ZXJ5IGFzcGVjdCBvZiB0aGUgd2Vic2l0ZSB3aXRoIHNlYXJjaCBlbmdpbmUgb3B0aW1pemF0aW9uIGluIG1pbmQgYW5kIHNvIHlvdXIgY3VzdG9tZXJzIGNhbiBmaW5kIHlvdSBhbW9uZyB0aGUgY29tcGV0aXRpb24uICBBbHNvIHRocm91Z2ggcmVzZWFyY2ggYW5kIGFuYWx5dGljcyB3ZSBjYW4gZGV2ZWxvcCwgcGxhbiBhbmQgZGVwbG95IHRoZSBiZXN0IFNFTyBhbmQgbWFya2V0aW5nIHByYWN0aWNlcyB0byBpbmNyZWFzZSBjb252ZXJzaW9ucyBhbmQgcmV0ZW50aW9uLicgfVxuXG4gIF07XG5cbiAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IDA7XG4gICRzY29wZS5zZXRDdXJyZW50U2xpZGVJbmRleCA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gaW5kZXg7XG4gIH1cbiAgJHNjb3BlLmlzQ3VycmVudFNsaWRlSW5kZXggPSBmdW5jdGlvbihpbmRleCl7XG4gICAgcmV0dXJuICRzY29wZS5jdXJyZW50SW5kZXggPT09IGluZGV4O1xuICB9XG59XSlcblxuLmFuaW1hdGlvbignLnNsaWRlLWFuaW1hdGlvbicsIGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZG9uZSl7XG4gICAgICBpZiAoY2xhc3NOYW1lID09ICduZy1oaWRlJyl7XG4gICAgICAgICAgVHdlZW5NYXgudG8oZWxlbWVudCwgMC41LCB7bGVmdDogLWVsZW1lbnQucGFyZW50KCkud2lkdGgoKSwgb25Db21wbGV0ZTogZG9uZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGRvbmUpe1xuICAgICAgaWYoY2xhc3NOYW1lID09ICduZy1oaWRlJyl7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ25nLWhpZGUnKTtcbiAgICAgICAgVHdlZW5NYXguc2V0KGVsZW1lbnQsIHsgbGVmdDogZWxlbWVudC5wYXJlbnQoKS53aWR0aCgpIH0pO1xuICAgICAgICBUd2Vlbk1heC50byhlbGVtZW50LCAwLjUsIHtsZWZ0OiAwLCBvbkNvbXBsZXRlOiBkb25lIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29udHJvbGxlcignbWFpbkN0cmwnLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnbXZDYWNoZWRQb3N0JywgJ25vdGlmaWVyJyAsJ1R3aXR0ZXJTZXJ2aWNlJywgJyRodHRwJywgJ01ldGEnLCBmdW5jdGlvbigkc2NvcGUsICRsb2NhdGlvbiwgbXZDYWNoZWRQb3N0LCBub3RpZmllciwgVHdpdHRlclNlcnZpY2UsICRodHRwLCBNZXRhKXtcblxuICBNZXRhLnNldFRpdGxlKCdIb21lJyk7XG4gIE1ldGEuc2V0RGVzYygnSSBlbmpveSBhbGwgdGhpbmdzIHdlYiBkZXZlbG9wbWVudCBhbmQgYW0gYWx3YXlzIGFjdGl2ZWx5IGxlYXJuaW5nIHRoZSBuZXdlc3QgdGVjaG5pcXVlcyBhbmQgbGFuZ2F1Z2VzLiBJZiB5b3UgaGF2ZSBhIHdlYiBkZXNpZ24gb3IgZGV2ZWxvcG1lbnQgcHJvamVjdCwgZ2l2ZSBtZSBhIHNob3V0LCBJIHdvdWxkIGxvdmUgdG8gdGFsayBhYm91dCBpdC4nKTtcblxuICAkc2NvcGUuc2VydmljZXMgPSBbXG4gICAgeyBuYW1lOiAnRGV2ZWxvcG1lbnQnLFxuICAgIHN2ZzogJ2Rldi1sb2dvJyxcbiAgICBkZXNjcmlwdGlvbjogJ0N1c3RvbWl6ZWQgYW5kIHJldXNhYmxlIGNvZGUgdXNpbmcgdGhlIG1vc3QgdXAgdG8gZGF0ZSBIVE1MNSwgQ1NTMyBhbmQgSmF2YXNjcmlwdCBmcmFtd29ya3MuIE9wdGlvbnMgcmFuZ2UgZnJvbSBzdGF0aWMgc2l0ZXMsIGNvbnRlbnQgbWFuYWdlZCBzaXRlcywgYW5kIGVjb21tZXJjZSBzdG9yZXMuJyxcbiAgICBtb3JlOiAnRGV2ZWxvcG1lbnQgU2tpbGxzIGluY2x1ZGUgSFRNTDUsIENTUywgSmF2YXNjcmlwdCwgQW5ndWxhciwgQmFja2JvbmUsIE5vZGUsIEV4cHJlc3MsIEJvb3N0cmFwIGFuZCBtb3JlLicgfSxcblxuICAgIHsgbmFtZTogJ1dlYiBEZXNpZ24nLFxuICAgIHN2ZzogJ2Rlc2lnbi1sb2dvJyxcbiAgICBkZXNjcmlwdGlvbjogJ0NyZWF0aW5nIGFuIGV4Y2VsbGVudCB1c2VyIGV4cGVyaWVuY2UgdGhyb3VnaCBjbGVhbiwgc2ltcGxlIGFuZCB0aG9yb3VnaGx5IGNyYWZ0ZWQgZGVzaWduLiBDb2xsYWJvcmF0aW9uIHdpdGggY2xpZW50cyBkdXJpbmcgZGVzaWduIHByb2Nlc3MgZW5zdXJlcyBhIHN1cGVyYiBmaW5pc2hlZCBwcm9qZWN0LicsXG4gICAgbW9yZTogJ1NlcnZpY2VzIGluY2x1ZGUgd2lyZSBmcmFtZXMsIHBob3Rvc2hvcCBtb2NrdXBzLCBsb2dvIGRlc2lnbiwgYW5kIGNvbXBhbnkgYnJhbmRpbmcuJyB9LFxuXG4gICAgeyBuYW1lOiAnU3VwcG9ydCcsXG4gICAgc3ZnOiAnc3VwLWxvZ28nLFxuICAgIGRlc2NyaXB0aW9uOiAnU3VwcG9ydCBpcyByZWFkaWx5IGF2YWlsYWJsZSBmb3IgY2xpZW50cyB3aGVuIGFueXRoaW5nIGNvbWVzIHVwIGFsb25nIHRoZSBkZXZlbG9wbWVudCBwcm9jZXNzLiBBbHNvIGF2YWlsYWJsZSBhcmUgcGVyc29uYWwgaW5zdHJ1Y3Rpb24gb24gaG93IHRvIG1haW50YWluIG9yIHVwZGF0ZSB5b3VyIG93biBzaXRlLicsXG4gICAgbW9yZTogJ0hhdmUgYSBuZXcgcHJvZHVjdCBvciBmZWF0dXJlIHlvdSB3YW50IHRvIGltcGxlbWVudD8gUGxhbnMgZm9yIGNvbnRpbnVlZCBzdXBwb3J0IGFuZCBtYWludGVuYW5jZSBhcmUgYXZhaWxhYmxlLicgfVxuXG4gIF07XG5cbiAgJHNjb3BlLnBvc3RzID0gbXZDYWNoZWRQb3N0LnF1ZXJ5KCk7XG5cbiAgJHNjb3BlLmZvcm0gPSB7fTtcblxuICAkc2NvcGUuc2VuZE1haWwgPSBmdW5jdGlvbigpe1xuICAgIHZhciBkYXRhID0oe1xuICAgICAgY29udGFjdE5hbWUgOiB0aGlzLmNvbnRhY3ROYW1lLFxuICAgICAgY29udGFjdENvbXBhbnkgOiB0aGlzLmNvbnRhY3RDb21wYW55LFxuICAgICAgY29udGFjdEVtYWlsIDogdGhpcy5jb250YWN0RW1haWwsXG4gICAgICBjb250YWN0TWVzc2FnZSA6IHRoaXMuY29udGFjdE1lc3NhZ2VcbiAgICB9KTtcblxuICAgICRodHRwLnBvc3QoJy9jb250YWN0LWZvcm0nLCBkYXRhKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpe1xuICAgICAgICBub3RpZmllci5ub3RpZnkoJ1RoYW5rIHlvdSBmb3IgeW91ciBtZXNzYWdlICcgKyBkYXRhLmNvbnRhY3ROYW1lKTtcbiAgICAgICAgICAgJHNjb3BlLmZvcm0uY29udGFjdEZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgICRzY29wZS5mb3JtLmNvbnRhY3RGb3JtLiRzZXRVbnRvdWNoZWQoKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpe1xuICAgICAgICBub3RpZmllci5ub3RpZnkoJ1RoZXJlIHdhcyBhbiBlcnJvciBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbicpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNvbnRhY3ROYW1lID0gbnVsbDtcbiAgICAgIHRoaXMuY29udGFjdENvbXBhbnkgPSBudWxsO1xuICAgICAgdGhpcy5jb250YWN0RW1haWwgPSBudWxsO1xuICAgICAgdGhpcy5jb250YWN0TWVzc2FnZSA9IG51bGw7XG5cbiAgfVxuXG4gICRzY29wZS5nZXRVc2VyID0gZnVuY3Rpb24odXNlcm5hbWUpe1xuXHRcdFR3aXR0ZXJTZXJ2aWNlLmdldFVzZXIodXNlcm5hbWUpXG5cdFx0ICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpe1xuXHRcdCAgICAgICAgJHNjb3BlLnR3aXR0ZXJFcnJvcnMgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgXHQkc2NvcGUudHdlZXRzID0gSlNPTi5wYXJzZShkYXRhLnJlc3VsdC51c2VyRGF0YSk7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygkc2NvcGUudHdlZXRzKTtcblx0XHQgICAgfSlcblx0XHQgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXtcblx0XHQgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3RoZXJlIHdhcyBhbiBlcnJvciByZXRyaWV2aW5nIGRhdGE6ICcsIGVycm9yKTtcblx0XHQgICAgICAgICRzY29wZS50d2l0dGVyRXJyb3JzID0gZXJyb3IuZXJyb3I7XG5cdFx0ICAgIH0pXG5cdH07XG5cbiAgLy8kc2NvcGUuZ2V0VXNlcigpO1xuXG5cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ25hdkN0cmwnLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJHNjb3BlLCAkbG9jYXRpb24sICRkb2N1bWVudCl7XG4gICRzY29wZS5zY3JvbGxUb3AgPSBmdW5jdGlvbigpe1xuICAgICRkb2N1bWVudC5zY3JvbGxUb3BBbmltYXRlZCgwKTtcbiAgfVxuICAkc2NvcGUubGlua1RvID0gZnVuY3Rpb24oaWQpe1xuXG4gICAgICB2YXIgcm91dGUgPSAkbG9jYXRpb24udXJsKCk7XG4gICAgICB2YXIgb2Zmc2V0ID0gNjA7XG4gICAgICB2YXIgZHVyYXRpb24gPSA4MDA7XG4gICAgICB2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChpZCk7XG5cbiAgICAgIGlmKHJvdXRlICE9PSAnLycpe1xuICAgICAgICAkbG9jYXRpb24udXJsKCcvJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAkZG9jdW1lbnQuc2Nyb2xsVG9FbGVtZW50KGVsZW1lbnQsIG9mZnNldCwgZHVyYXRpb24pO1xuICAgICAgICB9KTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGRvY3VtZW50LnNjcm9sbFRvRWxlbWVudChlbGVtZW50LCBvZmZzZXQsIGR1cmF0aW9uKTtcbiAgICAgIH1cbiAgfTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ3dvcmtDdHJsJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuXG4gICRzY29wZS5wcm9qZWN0cyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAnVGVuZHJpbCBJbmMuJyxcbiAgICAgIGxpbms6ICdodHRwczovL3d3dy50ZW5kcmlsaW5jLmNvbScsXG4gICAgICBjbGlja0Z1bmM6IHRvZ2dsZVRlbmRyaWwgPSBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLm1vZGFsID0gIXRoaXMubW9kYWw7XG4gICAgICB9LFxuICAgICAgYmFja2dyb3VuZEltZzogJ2ltZy9nYWxsZXJ5L3RlbmRyaWwucG5nJyxcbiAgICAgIG1vZGFsOiBmYWxzZSxcbiAgICAgIG1vZGFsSW1nOiAnaW1nL2dhbGxlcnkvdGVuZHJpbC1tb2NrdXAucG5nJyxcbiAgICAgIG5vTGluazogZmFsc2VcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdDcm93biBPZmZyb2FkJyxcbiAgICAgIGxpbms6ICdodHRwOi8vY3Jvd25vZmZyb2FkLmNvbScsXG4gICAgICBjbGlja0Z1bmM6IHRvZ2dsZUNyb3duID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubW9kYWwgPSAhdGhpcy5tb2RhbDtcbiAgICAgIH0sXG4gICAgICBiYWNrZ3JvdW5kSW1nOiAnaW1nL2dhbGxlcnkvY3Jvd24tb2Zmcm9hZC5qcGcnLFxuICAgICAgbW9kYWw6IGZhbHNlLFxuICAgICAgbW9kYWxJbWc6ICdpbWcvZ2FsbGVyeS9jcm93bi1vZmZyb2FkLW1vY2t1cC5qcGcnLFxuICAgICAgbm9MaW5rOiBmYWxzZVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0NvbG9yYWRvIEJyb2FkYmFuZCBQb3J0YWwnLFxuICAgICAgbGluazogJ2h0dHA6Ly9icm9hZGJhbmQuY28uZ292JyxcbiAgICAgIGNsaWNrRnVuYzogJHNjb3BlLnRvZ2dsZUJyb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubW9kYWwgPSAhdGhpcy5tb2RhbDtcbiAgICAgIH0sXG4gICAgICBiYWNrZ3JvdW5kSW1nOiAnaW1nL2dhbGxlcnkvd2lyZXMuanBnJyxcbiAgICAgIG1vZGFsOiBmYWxzZSxcbiAgICAgIG1vZGFsSW1nOiAnaW1nL2dhbGxlcnkvYnJvYWRiYW5kLmpwZycsXG4gICAgICBub0xpbms6IGZhbHNlXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnYWRpZGFzIGFkaVBsYXllcicsXG4gICAgICBsaW5rOiAnJyxcbiAgICAgIGNsaWNrRnVuYzogdG9nZ2xlQWRpID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubW9kYWwgPSAhdGhpcy5tb2RhbDtcbiAgICAgIH0sXG4gICAgICBiYWNrZ3JvdW5kSW1nOiAnaW1nL2dhbGxlcnkvYWRpcGxheWVyLmpwZycsXG4gICAgICBtb2RhbDogZmFsc2UsXG4gICAgICBtb2RhbEltZzogJ2ltZy9nYWxsZXJ5L2FkaXBsYXllcl9tb2NrdXAuanBnJyxcbiAgICAgIG5vTGluazogdHJ1ZVxuICAgIH1cbiAgXVxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuZmFjdG9yeSgnaWRlbnRpdHknLCBbJyR3aW5kb3cnLCAnbXZVc2VyJywgZnVuY3Rpb24oJHdpbmRvdywgbXZVc2VyKXtcblxuICB2YXIgY3VycmVudFVzZXI7XG4gIGlmKCEhJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0KSB7XG4gICAgY3VycmVudFVzZXIgPSBuZXcgbXZVc2VyKCk7XG4gICAgYW5ndWxhci5leHRlbmQoY3VycmVudFVzZXIsICR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdCk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlcjtcbiAgICB9LFxuXG4gICAgaXNBdXRob3JpemVkOiBmdW5jdGlvbihyb2xlKXtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci5yb2xlcy5pbmRleE9mKHJvbGUpID4gLTE7XG4gICAgfVxuXG4gIH1cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbGxzQmxvZycpLmNvbnRyb2xsZXIoJ2xvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ2lkZW50aXR5JywgJ25vdGlmaWVyJywgJ212QXV0aCcsICckbG9jYXRpb24nLCAnTWV0YScsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGlkZW50aXR5LCBub3RpZmllciwgbXZBdXRoLCAkbG9jYXRpb24sIE1ldGEpe1xuXG4gICAgd2luZG93LnNjcm9sbFRvKDAsMCk7XG4gICAgTWV0YS5zZXRUaXRsZSgnQWNjb3VudCcpO1xuXG4gICAgJHNjb3BlLmlkZW50aXR5ID0gaWRlbnRpdHk7XG5cbiAgICAkc2NvcGUuc2lnbkluID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKXtcbiAgICAgIG12QXV0aC5hdXRoZW50aWNhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbihzdWNjZXNzKXtcbiAgICAgICAgaWYoc3VjY2Vzcyl7XG4gICAgICAgICAgbm90aWZpZXIubm90aWZ5KCdZb3UgaGF2ZSBzaWduZWQgaW4nKTtcbiAgICAgICAgICAkbG9jYXRpb24udXJsKCcvYWNjb3VudCcpO1xuICAgICAgICAgICRzY29wZS5hY3RTaG93biA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnVXNlcm5hbWUvUGFzc3dvcmQgSW5jb3JyZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2lnbk91dCA9IGZ1bmN0aW9uKCl7XG4gICAgICBtdkF1dGgubG9nb3V0VXNlcigpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS51c2VybmFtZSA9ICcnO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgbm90aWZpZXIubm90aWZ5KCdZb3UgaGF2ZSBsb2dnZWQgb3V0Jyk7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNpZ251cCA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbmV3VXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAkc2NvcGUudXNlcm5hbWUsXG4gICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLmZOYW1lLFxuICAgICAgICBsYXN0TmFtZTogJHNjb3BlLmxOYW1lLFxuICAgICAgICBwYXNzd29yZDogJHNjb3BlLnBhc3N3b3JkXG4gICAgICB9O1xuICAgICAgbXZBdXRoLmNyZWF0ZVVzZXIobmV3VXNlckRhdGEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgbm90aWZpZXIubm90aWZ5KCdVc2VyIGFjY291bnQgY3JlYXRlZCcpO1xuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICBub3RpZmllci5lcnJvcihyZWFzb24pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpe1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFjdFNob3duID0gZmFsc2U7XG4gICAgJHNjb3BlLnRvZ2dsZUFjY291bnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmKGlkZW50aXR5LmlzQXV0aGVudGljYXRlZCgpKXtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9hY2NvdW50Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc2NvcGUuYWN0U2hvd24gPSAhJHNjb3BlLmFjdFNob3duO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuc2lnbnVwU2hvd24gPSBmYWxzZTtcbiAgICAkc2NvcGUudG9nZ2xlU2lnbnVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUuc2lnbnVwU2hvd24gPSAhJHNjb3BlLnNpZ251cFNob3duO1xuICAgIH07XG5cblxufV0pO1xuIiwiXG5hbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuZmFjdG9yeSgnbXZBdXRoJywgWyckaHR0cCcsICdpZGVudGl0eScsICckcScsICdtdlVzZXInLCBmdW5jdGlvbigkaHR0cCwgaWRlbnRpdHksICRxLCBtdlVzZXIpe1xuXG4gIHJldHVybiB7XG4gICAgLy8gdGhpcyB0aGluZyB3b3JraW5nXG4gICAgYXV0aGVudGljYXRlVXNlcjogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKXtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsIHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKXtcblxuICAgICAgICAgIHZhciB1c2VyID0gbmV3IG12VXNlcigpO1xuICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHVzZXIsIHJlc3BvbnNlLmRhdGEudXNlcik7XG4gICAgICAgICAgaWRlbnRpdHkuY3VycmVudFVzZXIgPSB1c2VyO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgbG9nb3V0VXNlcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAkaHR0cC5wb3N0KCcvbG9nb3V0Jywge2xvZ291dDogdHJ1ZX0pLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgaWRlbnRpdHkuY3VycmVudFVzZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgIH0sXG5cbiAgICBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlOiBmdW5jdGlvbihyb2xlKXtcbiAgICAgIGlmIChpZGVudGl0eS5pc0F1dGhvcml6ZWQoJ2FkbWluJykpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGF1dGhvcml6ZUF1dGhldGljYXRlZFVzZXJGb3JSb3V0ZTogZnVuY3Rpb24oKXtcbiAgICAgIGlmIChpZGVudGl0eS5pc0F1dGhlbnRpY2F0ZWQoKSl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnbm90IGEgY3VycmVudCB1c2VyJyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNyZWF0ZVVzZXIgOiBmdW5jdGlvbihuZXdVc2VyRGF0YSkge1xuICAgICAgIHZhciBuZXdVc2VyID0gbmV3IG12VXNlcihuZXdVc2VyRGF0YSk7XG4gICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgIG5ld1VzZXIuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICBpZGVudGl0eS5jdXJyZW50VXNlciA9IG5ld1VzZXI7XG4gICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3BvbnNlLmRhdGEucmVhc29uKTtcbiAgICAgICB9KTtcblxuICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICB1cGRhdGVDdXJyZW50VXNlcjogZnVuY3Rpb24obmV3VXNlckRhdGEpe1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICB2YXIgY2xvbmUgPSBhbmd1bGFyLmNvcHkoaWRlbnRpdHkuY3VycmVudFVzZXIpO1xuICAgICAgICBhbmd1bGFyLmV4dGVuZChjbG9uZSwgbmV3VXNlckRhdGEpO1xuICAgICAgICBjbG9uZS4kdXBkYXRlKCkudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgIGlkZW50aXR5LmN1cnJlbnRVc2VyID0gY2xvbmU7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3BvbnNlLmRhdGEucmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICB9Ly8gcmV0dXJuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3aWxsc0Jsb2cnKS5mYWN0b3J5KCdtdlVzZXInLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uKCRyZXNvdXJjZSl7XG5cbiAgdmFyIFVzZXJSZXNvdXJjZSA9ICRyZXNvdXJjZSgnL2FwaS91c2Vycy86aWQnLCB7X2lkIDogJ0BpZCd9LCB7XG4gICAgdXBkYXRlOiB7bWV0aG9kOiAnUFVUJywgaXNBcnJheTogZmFsc2V9XG4gIH0pO1xuXG4gIFVzZXJSZXNvdXJjZS5wcm90b3R5cGUuaXNBZG1pbiA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHRoaXMucm9sZXMgJiYgdGhpcy5yb2xlcy5pbmRleE9mKCdhZG1pbicpID4gLTE7XG4gIH1cblxuICByZXR1cm4gVXNlclJlc291cmNlO1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnd2lsbHNCbG9nJykuY29udHJvbGxlcignc2lnbnVwQ3RybCcsIFsnJHNjb3BlJywgJ212QXV0aCcsICdub3RpZmllcicsICckbG9jYXRpb24nLCBmdW5jdGlvbigkc2NvcGUsIG12QXV0aCwgbm90aWZpZXIsICRsb2NhdGlvbil7XG4gICAgJHNjb3BlLnNpZ251cCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgIHZhciBuZXdVc2VyRGF0YSA9IHtcbiAgICAgICAgdXNlcm5hbWU6ICRzY29wZS51c2VybmFtZSxcbiAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuZk5hbWUsXG4gICAgICAgIGxhc3ROYW1lOiAkc2NvcGUubE5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmRcbiAgICAgIH07XG4gICAgICBtdkF1dGguY3JlYXRlVXNlcihuZXdVc2VyRGF0YSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICBub3RpZmllci5ub3RpZnkoJ1VzZXIgYWNjb3VudCBjcmVhdGVkJyk7XG4gICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIG5vdGlmaWVyLmVycm9yKHJlYXNvbik7XG4gICAgICB9KTtcblxuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKXtcbiAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfTtcblxufV0pO1xuIl19
